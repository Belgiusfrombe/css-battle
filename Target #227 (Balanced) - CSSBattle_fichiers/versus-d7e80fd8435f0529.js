(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{8495:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versus",function(){return n(1701)}])},419:function(e,t,n){"use strict";n.d(t,{a:function(){return d}});var a=n(2322),r=n(7500),i=n(2259),s=n.n(i),l=n(5598),o=n(9604),c=n(3316);function d(e){var t=e.gameMode,n=e.minimal,i=void 0!==n&&n,d=e.onClose,u=e.isVersus;return void 0!==u&&u?i?(0,a.jsxs)("div",{className:"pill",children:[(0,a.jsx)("span",{className:"pill__emoji",children:c.VersusGameModes[t].emoji})," ",c.VersusGameModes[t].label]}):(0,a.jsxs)("div",{className:"".concat(s().battleMode," ").concat(s().battleModeLarge," ").concat(s().versusBattleMode),children:[(0,a.jsxs)(l.HStack,{children:[(0,a.jsx)("p",{className:s().gameModeLabel,children:c.VersusGameModes[t].emoji}),(0,a.jsxs)(l.VStack,{gap:"0.25rem",align:"flex-start",children:[c.VersusGameModes[t].label,(0,a.jsx)("p",{className:s().gameModeLabelDesc,children:c.VersusGameModes[t].description})]})]}),d&&(0,a.jsx)("a",{className:s().closeBtn,onClick:d,children:(0,a.jsx)(o.J,{name:"cross",marginRight:"0",size:"18"})})]}):i?(0,a.jsx)("div",{className:"pill",children:t===r.BattleGameModes.FIRST_TO_MATCH?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pill__emoji",children:"\u23f0"})," Time Attack"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pill__emoji",children:"\u26f3"})," Code Golf"]})}):(0,a.jsxs)("div",{className:"".concat(s().battleMode," ").concat(s().battleModeLarge),children:[t===r.BattleGameModes.FIRST_TO_MATCH?(0,a.jsxs)(l.HStack,{children:[(0,a.jsx)("p",{className:s().gameModeLabel,children:"\u23f0"}),(0,a.jsxs)(l.VStack,{gap:"0.25rem",align:"flex-start",children:["Time Attack",(0,a.jsx)("p",{className:s().gameModeLabelDesc,children:"Quickest to get 100% matches wins the game"})]})]}):(0,a.jsxs)(l.HStack,{children:[(0,a.jsx)("p",{className:s().gameModeLabel,children:"\u26f3"}),(0,a.jsxs)(l.VStack,{gap:"0.25rem",align:"flex-start",children:["Code Golf",(0,a.jsx)("p",{className:s().gameModeLabelDesc,children:"Shortest code with a 100% match gets the highest score"})]})]}),d&&(0,a.jsx)("a",{className:s().closeBtn,onClick:d,children:(0,a.jsx)(o.J,{name:"cross",marginRight:"0",size:"18"})})]})}},1453:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var a=n(2322),r=n(6746),i=n(5598);function s(e){var t=e.children,n=e.sticky,s=e.keyCombo,l=e.extraContent,o=e.meta;s&&s.split("+");return(0,a.jsxs)("div",{className:"item__header  ".concat(n?"item__header--sticky":""),children:[(0,a.jsxs)(i.HStack,{gap:"0.5rem",children:[(0,a.jsx)("h3",{className:"header__title",children:t}),l,s?(0,a.jsx)(r.M,{value:s}):null]}),(0,a.jsx)("div",{className:"header__extra-info",children:o})]})}},8431:function(e,t,n){"use strict";n.d(t,{x:function(){return u}});var a=n(2322),r=n(9604),i=n(5598),s=n(3196),l=n.n(s),o=n(7841),c=n(8329),d=n(2548),u=function(e){var t=e.icon,n=e.showProBadge,s=e.title,u=e.subtitle,h=e.beta;return(0,a.jsx)(d.E.div,{className:l().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)(i.VStack,{children:[t?(0,a.jsx)(r.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,n?(0,a.jsx)(c.Z,{height:"24"}):null,(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:s}),h?(0,a.jsx)("div",{className:"pill ",style:{position:"absolute",left:"100%",top:"-0.5rem"},children:"Beta"}):null]}),(0,a.jsx)("div",{style:{maxWidth:"72ch"},children:(0,a.jsx)(o.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},6746:function(e,t,n){"use strict";n.d(t,{M:function(){return c}});var a=n(6383),r=n(930),i=n(2322),s=n(2784),l=n(5598);function o(e){return"Control"===e?"ctrl":e.toLowerCase()}var c=function(e){var t=e.value,n=t&&t.split("+"),c=(0,a.Z)(s.useState([]),2),d=c[0],u=c[1];(0,s.useEffect)((function(){var e=function(e){var t=o(e.key);n.includes(t)&&!d.includes(t)&&(d.push(t),u((0,r.Z)(d)))},t=function(e){var t=o(e.key);n.includes(t)&&d.includes(t)&&(d.splice(d.indexOf(t),1),u((0,r.Z)(d)))},a=function(){"hidden"===document.visibilityState&&u([])};return document.body.addEventListener("keydown",e,{capture:!0}),document.body.addEventListener("keyup",t,{capture:!0}),document.addEventListener("visibilitychange",a),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),document.removeEventListener("visibilitychange",a)}}),[]);d.length;return(0,i.jsx)(l.HStack,{gap:"0.25rem",children:n&&n.map((function(e,t){return(0,i.jsx)("kbd",{className:"pill  pill--key ".concat(d.includes(e)?"pill--key-pressed":""),children:e},t)}))})}},5295:function(e,t,n){"use strict";n.d(t,{i:function(){return c}});var a=n(6383),r=n(2322),i=n(2784),s=n(5598),l=n(2367);function o(e){if(!e)return[];var t=/\[(.*?)\]\((.*?)\)/g;return e.split(/(\[.*?\]\(.*?\)|`.*?`)/g).filter(Boolean).map((function(e,n){if(e.startsWith("`")&&e.endsWith("`")){var i=e.slice(1,-1);return(0,r.jsx)("code",{children:i},n)}if(e.match(t)){var s=(0,a.Z)(t.exec(e),3),l=s[1],o=s[2];return(0,r.jsx)("a",{href:o,className:"link",target:"_blank",children:l},n)}return e}))}var c=(0,i.memo)((function(e){var t=e.levelData,n=(0,i.useState)(0),a=n[0],o=n[1],c=(0,i.useRef)();(0,i.useEffect)((function(){return o(0),function(){clearInterval(c.current)}}),[t]);var u=function(){c.current=setTimeout((function(){o(a+1)}),(0,l.TN)(500,1e3))};return(0,r.jsx)(s.VStack,{gap:"0.8rem",align:"stretch",children:t.instructions.map((function(e,n){return n>a?null:(0,r.jsx)(d,{data:e,isHighlighted:t.mainInstruction===n,onFinish:n===a?u:void 0,index:n,currentIndex:a,lines:t.lines},"".concat(t.name,"-").concat(n))}))})})),d=function(e){e.index;var t=e.data,n=e.isHighlighted,a=e.lines,s=e.onFinish,c=(0,i.useState)(""),d=c[0],u=c[1],h=(0,i.useRef)(0),m=(0,i.useRef)(),p=(0,i.useRef)();function g(){if(u(t.slice(0,h.current+1)),h.current>=t.length)clearTimeout(m.current),s&&s();else{h.current+=1;var e=" "===t[h.current]&&"\udffc"===t[h.current-1];m.current=setTimeout(g,e?1e3:" "===t[h.current]?(0,l.TN)(40,100):(0,l.TN)(5,20))}}(0,i.useEffect)((function(){return u(""),h.current=0,g(),function(){clearTimeout(m.current)}}),[t]),(0,i.useEffect)((function(){return clearTimeout(m.current),g(),function(){clearTimeout(m.current)}}),[!!s]);return(0,r.jsx)("p",{ref:p,style:{display:"block",fontWeight:n?"600":"500",color:n?"var(--clr-heading)":"inherit",cursor:n?"pointer":"normal",maxWidth:"70ch",letterSpacing:"0.2px"},onMouseEnter:function(e){if(n)if(a){document.querySelectorAll(".cm-editor .cm-line");var t=a.map((function(e){return"L".concat(e+1,"L")})).join("");document.querySelector(".cm-editor").setAttribute("highlight-lines",t)}else;},onMouseLeave:function(){if(n){document.querySelector(".cm-editor").setAttribute("highlight-lines","");var e=document.querySelector(".instruction-arrow");e&&(e.classList.add("undo"),setTimeout((function(){e.remove()}),500))}},children:o(d).map((function(e,t){return(0,r.jsx)(i.Fragment,{children:e},t)}))})}},384:function(e,t,n){"use strict";n.d(t,{u:function(){return g}});var a=n(865),r=n(6670),i=n(6297),s=n(2322),l=(n(2784),n(8261)),o=n(2548),c=n(3517),d=n(5239),u=n(1453),h=(0,o.E)(l.cZ),m=(0,o.E)(l.t9),p={type:"spring",damping:9,stiffness:120,duration:500};function g(e){var t=e.isOpen,n=e.onRequestClose,l=e.size,o=void 0===l?"big":l,g=e.extraClasses,f=e.header,x=e.title,v=e.hideOverlay,j=e.children,y=(0,i.Z)(e,["isOpen","onRequestClose","size","extraClasses","header","title","hideOverlay","children"]),b=(0,c.J)();return(0,s.jsx)(d.M,{children:t?(0,s.jsx)(m,(0,r.Z)((0,a.Z)({initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}},style:{background:v?"transparent":null},isOpen:t,onDismiss:n},y),{children:(0,s.jsxs)(h,{className:"modal--".concat(o," ").concat(g),transition:b?{duration:500}:p,initial:{y:b?0:-100},animate:{y:0},exit:{opacity:0,y:b?0:-200,transition:{duration:.2}},"aria-label":x,children:[f?(0,s.jsx)(u.M,{children:f}):null,(0,s.jsx)("div",{style:{padding:"2rem"},children:j})]})})):null})}},4987:function(e,t,n){"use strict";n.d(t,{O:function(){return o},s:function(){return c}});var a=n(2322),r=n(2548),i=n(2784),s=n(9721),l=n.n(s),o=function(e){var t=e.onChange,n=e.defaultChecked,i=e.selected,s=e.value,o=e.primary,c=e.highlightId,d=e.children;return(0,a.jsxs)("label",{className:"".concat(l().radioTabBtn," ").concat(o&&l().radioTabBtnPrimary),children:[(0,a.jsx)("input",{type:"radio",name:"tab",value:s,defaultChecked:n,onChange:t}),i?(0,a.jsx)(r.E.div,{layoutId:c,className:"".concat(l().activeIndicator," ").concat(o&&l().activeIndicatorPrimary)}):null,(0,a.jsx)("div",{style:{position:"relative",color:i?"var(--clr-link)":"var(--clr-text)",transition:"0.3s ease"},children:d})]})},c=function(e){var t=e.options,n=e.customOptions,r=e.onChange,s=e.value,c=e.fullWidth,d=void 0!==c&&c,u=e.primary,h=void 0!==u&&u,m=e.classes,p=void 0===m?"":m,g=(0,i.useId)();return(0,a.jsxs)("div",{className:"".concat(l().radioTabs," ").concat(d&&l().radioTabsFullWidth," ").concat(h&&l().radioTabsPrimary," ").concat(p),children:[t.map((function(e,t){return(0,a.jsx)(o,{onChange:r,value:e.value,selected:s===e.value,primary:h,highlightId:g,children:e.label},e.value)})),n]})}},9376:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var a=n(2322),r=n(2784),i=r.useEffect,s=r.useRef,l=function(e){var t=e.children,n=e.opacity,r=s();return i((function(){var e=setInterval((function(){var e=.1*Math.random();r.current.querySelector("feTurbulence").setAttribute("baseFrequency","0 "+e)}),150);return function(){clearInterval(e)}}),[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"tv-glitch",style:{"--opacity":n},children:[(0,a.jsx)("svg",{children:(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"noise",x:"0%",y:"0%",width:"100%",height:"100%",ref:r,children:[(0,a.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0 0.000001",result:"NOISE",numOctaves:"2"}),(0,a.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"NOISE",scale:"100",xChannelSelector:"R",yChannelSelector:"R"})]})})}),(0,a.jsx)("img",{className:"tv-glitch__image",src:"/images/tv-glitch.png"}),t]})})}},1387:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var a=n(2322),r=n(5295),i=function(e){var t=e.message,n=e.children;return(0,a.jsxs)("div",{style:{textAlign:"center",minHeight:"calc(100vh - 15rem)",display:"grid",placeContent:"center"},children:[(0,a.jsx)(r.i,{levelData:{instructions:[t]}}),n]})}},5140:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var a=n(2784),r=n(3290),i=n(3590),s=n(7037),l=n(7892),o=n(1893),c=n(2367),d=function(){var e=(0,a.useState)({free:0,paid:0}),t=e[0],n=e[1],d=(0,a.useRef)({free:0,paid:0}),u=(0,a.useRef)(!1),h=(0,o.a)();return(0,a.useEffect)((function(){if(h){var e=(0,s.kN)(h.uid,(function(e){var t;if(null===e||void 0===e||null===(t=e.versus)||void 0===t?void 0:t.credits){var a,r,i,s,o=d.current.free+d.current.paid,h=(null===(a=e.versus)||void 0===a||null===(r=a.credits)||void 0===r?void 0:r.free)+(null===(i=e.versus)||void 0===i||null===(s=i.credits)||void 0===s?void 0:s.paid);u.current&&h>o&&((0,c.GC)("/sfx/coin.mp3"),l.Am.success("".concat(h-o," credits added!"))),n(e.versus.credits),d.current=e.versus.credits}}));return function(){e()}}}),[null===h||void 0===h?void 0:h.uid]),{credits:t,buyCredits:function(){(0,r.q)({name:"creditsCheckoutStarted"}),window.Paddle.Checkout.open({product:i.Q[i.C.CREDITS].vendorId,passthrough:JSON.stringify({userId:h.uid}),successCallback:function(){u.current=!0,(0,r.q)({name:"creditsPurchased"})}})}}}},1255:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var a=n(2784);function r(e){var t=(0,a.useState)(e),n=t[0],r=t[1];return{input:{value:n,onChange:function(e,t){if(void 0!==t)return r(t);r("checkbox"===e.target.type?e.target.checked:e.target.value)}},value:n,setValue:r}}},6735:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var a=n(2784);function r(e){var t=(0,a.useState)(),n=t[0],r=t[1];return(0,a.useEffect)((function(){var t=document.createElement("script");t.src="https://cdn.paddle.com/paddle/paddle.js",t.async="true",t.addEventListener("load",(function(){window.Paddle.Setup({vendor:e}),r(!0)})),document.body.appendChild(t)}),[]),n}},1701:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n(8788),r=n(6383),i=n(2970),s=n(2322),l=n(2784),o=n(7729),c=n.n(o),d=n(5598),u=n(8431),h=n(2220),m=n(384),p=n(1251),g=n(9604),f=n(1255),x=n(1893),v=n(7841),j=n(7037),y=n(5632),b=n(3316),S=function(e){var t=e.isOpen,n=e.onRequestClose,a=(0,l.useState)(!1),r=a[0],i=a[1],o=(0,x.a)(),c=(0,y.useRouter)();return(0,s.jsxs)(m.u,{isOpen:t,size:"small",extraClasses:"modal--text-center",title:"Create a room",children:[(0,s.jsx)("div",{style:{margin:"1rem 0 0.2rem"},children:(0,s.jsx)(g.J,{name:"battle",size:"48"})}),(0,s.jsx)("h2",{style:{marginBottom:"2rem"},children:"Create a Room"}),(0,s.jsxs)(d.VStack,{gap:"1rem",children:[(0,s.jsxs)(d.HStack,{gap:"0.3rem",align:"center",children:[(0,s.jsx)(v.x,{tag:"p",size:6,weight:"bolder",appearance:"brand",mono:!1,children:"Create"}),(0,s.jsx)(v.x,{tag:"p",size:6,appearance:"secondary",mono:!0,children:"."}),(0,s.jsx)(v.x,{tag:"p",size:6,weight:"bolder",appearance:"brand",mono:!1,children:"Invite"}),(0,s.jsx)(v.x,{tag:"p",size:6,appearance:"secondary",mono:!0,children:"."}),(0,s.jsx)(v.x,{tag:"p",size:6,weight:"bolder",appearance:"brand",mono:!1,children:"Battle"})]}),(0,s.jsx)(v.x,{size:2,maxChars:"70",appearance:"secondary",align:"center",children:"Creating a room doesn't cost a credit, until you start a battle."}),(0,s.jsx)(v.x,{size:2,maxChars:"70",appearance:"secondary",align:"center",children:'Playing a battle will also unlock "Versus" feature for your opponent and give them 2 free credits to host battles.'})]}),(0,s.jsx)(p.xu,{style:{marginTop:"2rem",textAlign:"start",fontFamily:"IBM Plex Mono"},children:(0,s.jsx)("form",{onSubmit:function(e){e.preventDefault(),i(!0);var t=function(){for(var e="",t=0;t<6;t++)e+=Math.floor(10*Math.random());return e}();(0,j.uz)({userId:o.uid,versus:{roomCode:t,settings:{gameMode:b.VersusGameModesEnum.FIRST_TO_MATCH,targetDifficulty:b.VersusTargetDifficultyEnum.EASY,duration:15,challenges:[]}}}).then((function(e){i(!1),c.push("/versus/room/".concat(e))}))},children:(0,s.jsxs)(p.hE,{center:!0,children:[(0,s.jsx)(h.z,{onClick:n,children:"Cancel"}),(0,s.jsx)(h.z,{type:"submit",isLoading:r,primary:!0,children:"Create room"})]})})})]})},_=n(865),C=n(6670),k=n(7892),w=function(e){var t,n=e.isOpen,a=e.onRequestClose,r=(0,l.useState)(!1),i=r[0],o=r[1],c=(0,x.a)(),u=(0,y.useRouter)(),v=(0,f.p)("");return(0,s.jsxs)(m.u,{isOpen:n,size:"content",extraClasses:"modal--text-center",title:"Join a Room",children:[(0,s.jsx)("div",{style:{margin:"1rem 0 0.2rem"},children:(0,s.jsx)(g.J,{name:"battle",size:"48"})}),(0,s.jsx)("h2",{style:{marginBottom:"2rem"},children:"Join a Room"}),(0,s.jsx)(d.HStack,{justify:"center",children:(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),(0,j.Vj)({userId:c.uid,roomCode:v.value}).then((function(e){o(!1),"Room code invalid!"!==e&&"Room is full!"!==e&&"You are already in 1 room, leave it to join this one!"!==e&&"You are restricted from entering this room."!==e?(k.Am.success("Joined room successfully!"),u.push("/versus/room/".concat(e))):k.Am.error(e)})).catch((function(e){console.log(99,e),k.Am.error("Couldn't join room! Let us know if the problem persists.")})).finally((function(){return o(!1)}))},children:[(0,s.jsx)(p.II,(0,C.Z)((0,_.Z)({label:"Room code shared with you",placeholder:"123456"},v.input),{required:!0,className:"input--otp",maxLength:"6"})),(0,s.jsxs)(p.hE,{center:!0,children:[(0,s.jsx)(h.z,{onClick:function(){v.setValue(""),a()},children:"Cancel"}),(0,s.jsx)(h.z,{type:"submit",isLoading:i,primary:!0,disabled:6!==(null===(t=v.value)||void 0===t?void 0:t.length),children:"Join room"})]})]})})]})},T=n(349),N=n(5416),M=n(4164),D=n.n(M),B=n(497),R=n.n(B),z=n(3029),I=n(419),L=(n(9376),n(9241)),V=n(2367),E=n(4030);function H(e){var t,n,r,o,c,u,h=e.battle,m=e.fullWidth,p=(0,l.useState)(),f=p[0],y=p[1],b=(0,l.useState)([]),S=b[0],_=b[1],C=(0,x.a)();return(0,l.useEffect)((function(){(0,j.Qz)(h.levelIds[0]).then((function(e){y(e)}))}),[h.levelIds[0]]),(0,l.useEffect)((function(){(0,a.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,V.zU)({playerIds:h.players,playersList:S,user:C})];case 1:return _.apply(void 0,[e.sent()]),[2]}}))}))()}),[]),(0,s.jsx)(N.s,{fullWidth:m,children:(0,s.jsxs)(d.HStack,{gap:"2rem",align:"stretch",responsive:!0,children:[(null===f||void 0===f?void 0:f.image)?(0,s.jsx)("img",{loading:"lazy",src:f.image,srcSet:"".concat(f.image.replace(/.png/,"@2x.png")," 2x"),alt:"Target #".concat(f.id),style:{aspectRatio:"4 / 3",borderRadius:"0.5rem"},height:"150"}):(0,s.jsx)(L.R,{children:"Loading..."}),(0,s.jsxs)(d.VStack,{align:"start",gap:"1.2rem",classes:"fxg-1",children:[(0,s.jsxs)(d.HStack,{justify:"space-between",fullWidth:!0,children:[(0,s.jsxs)(d.HStack,{gap:"1rem",children:[(0,s.jsx)(I.a,{gameMode:h.settings.gameMode,minimal:!0}),(0,s.jsx)(z.k,{status:"finished"})]}),(0,s.jsx)(v.x,{mono:!1,weight:600,appearance:"secondary",size:1,letterSpacing:"0.3px",children:(0,V.Jp)((0,E.normalizeDate)(h.startDate),{showTime:!1})})]}),S.length?(0,s.jsxs)(d.HStack,{align:"center",gap:"0.8rem",children:[(null===h||void 0===h||null===(t=h.metadata)||void 0===t?void 0:t.winner)===S[0].uid?(0,s.jsx)(g.J,{name:"crown",size:"1em",color:"var(--clr-gold-crown)",marginRight:"0"}):null,(0,s.jsx)(P,{player:S[0],currentUser:!0}),(0,s.jsx)(v.x,{mono:!1,weight:600,appearance:"primary",size:1,letterSpacing:"0.3px",children:"vs"}),(0,s.jsx)(P,{player:S[1],currentUser:!1}),(null===h||void 0===h||null===(n=h.metadata)||void 0===n?void 0:n.winner)===S[1].uid?(0,s.jsx)(g.J,{name:"crown",size:"1em",color:"var(--clr-gold-crown)",marginRight:"0"}):null]}):null,(0,s.jsxs)(d.VStack,{gap:"5px",align:"start",children:[S.length?(0,s.jsx)(v.x,{mono:!1,weight:600,appearance:"secondary",size:1,tag:"p",letterSpacing:"0.3px",children:(0,s.jsxs)(d.HStack,{gap:"8px",children:["Match result :",(null===h||void 0===h||null===(r=h.metadata)||void 0===r?void 0:r.winner)?(null===h||void 0===h||null===(o=h.metadata)||void 0===o?void 0:o.winner)===S[0].uid?(0,s.jsx)("img",{src:S[0].photoURL,alt:"".concat(S[0].displayName," - avatar"),className:R().userAvatar,width:20,height:20}):(0,s.jsx)("img",{src:S[1].photoURL,alt:"".concat(S[1].displayName," - avatar"),className:R().userAvatar,width:20,height:20}):null,(0,s.jsx)("span",{style:{color:"var(--clr-heading)"},children:(null===h||void 0===h||null===(c=h.metadata)||void 0===c?void 0:c.winner)?(null===h||void 0===h||null===(u=h.metadata)||void 0===u?void 0:u.winner)===S[0].uid?"You won \ud83c\udfc6":"".concat(S[1].displayName," won \ud83c\udfc6"):"No winner \u2694\ufe0f"})]})}):null,S.length?(0,s.jsx)(v.x,{mono:!1,weight:600,appearance:"secondary",size:1,tag:"p",letterSpacing:"0.3px",children:(0,s.jsxs)(d.HStack,{gap:"10px",children:["Hosted by",h.createdBy===S[0].uid?(0,s.jsx)("img",{src:S[0].photoURL,alt:"".concat(S[0].displayName," - avatar"),className:R().userAvatar,width:20,height:20}):(0,s.jsx)("img",{src:S[1].photoURL,alt:"".concat(S[1].displayName," - avatar"),className:R().userAvatar,width:20,height:20}),(0,s.jsx)("span",{style:{color:"var(--clr-heading)"},children:h.createdBy===S[0].uid?"You":S[1].displayName})]})}):null]})]})]})})}var P=function(e){var t=e.player,n=e.currentUser;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.qE,{small:!0,size:32,url:t.photoURL,isPro:t.isPro,userId:t.uid,className:R().userAvatar,highlight:!1}),(0,s.jsx)(p.Rj,{name:n?"You":t.displayName,userId:t.uid,className:R().userName,ellipsis:!0})]})},A=n(4987),F=function(e){var t=e.icon,n=e.value,a=e.valueDim,r=e.description,i=e.fullWidth,l=void 0!==i&&i,o=e.large,c=void 0!==o&&o;return(0,s.jsx)("div",{className:"leaderboard-stats-box ".concat(c?"leaderboard-stats-box--large":""),style:{width:l?"100%":null},children:(0,s.jsxs)(d.VStack,{gap:0,children:[(0,s.jsx)("div",{className:"leaderboard-stats-box__icon",children:(0,s.jsx)(g.J,{name:t,color:"var(--clr-brand)",size:c?24:20,marginRight:"0"})}),(0,s.jsxs)(d.HStack,{gap:"0.5rem",children:[(0,s.jsx)(v.x,{mono:!1,size:c?3:2,weight:700,appearance:"primary",children:n}),a&&(0,s.jsx)(v.x,{mono:!1,size:c?3:2,weight:500,appearance:"secondary",children:a})]}),(0,s.jsx)(v.x,{mono:!1,size:c?1:0,weight:500,appearance:"secondary",children:r})]})})},G=n(6735),O=(n(5295),n(7414)),q=n(5140),U=n(1387),W=function(e){var t=e.image,n=e.title,a=e.onClick;return(0,s.jsx)("button",{className:D().roomTile,onClick:a,children:(0,s.jsx)(N.s,{fullWidth:!0,fullHeight:!0,padding:"0.75rem",children:(0,s.jsxs)(d.VStack,{gap:"1rem",align:"initial",fullHeight:!0,children:[(0,s.jsx)("img",{className:D().roomTileImage,src:t,width:"100%"}),(0,s.jsx)("div",{style:{padding:" 0.5rem 0.75rem 0.75rem",height:"100%"},children:(0,s.jsx)(v.x,{mono:!1,size:3,weight:600,appearance:"heading",children:n})})]})})})},Y=function(e){var t=e.filterBy,n=e.finishedBattles,a=e.userId;if("hostedGames"===t){var r=n.filter((function(e){return e.createdBy===a}));return(0,s.jsx)(d.VStack,{gap:"2rem",align:"stretch",children:r.length?r.map((function(e){return(0,s.jsx)(H,{battle:e},e.id)})):(0,s.jsx)(J,{title:"No hosted versus battles!",description:"Want to host a 1-on-1 CSSBattle? Simply create a room, invite your friend, and battle can be started using your monthly free credit!"})})}if("participatedGames"===t){var i=n.filter((function(e){return e.createdBy!==a}));return(0,s.jsx)(d.VStack,{gap:"2rem",align:"stretch",children:i.length?i.map((function(e){return(0,s.jsx)(H,{battle:e},e.id)})):(0,s.jsx)(J,{title:"No participated versus battles!",description:"Want to play a 1-on-1 CSSBattle? To participate, simply join a room with the code shared with you. It does not even require a credit!"})})}},J=function(e){var t=e.title,n=e.description;return(0,s.jsx)("div",{className:D().emptyPastBattlesTile,children:(0,s.jsxs)(d.VStack,{gap:"0rem",align:"stretch",children:[(0,s.jsx)("div",{style:{position:"absolute",inset:0},children:(0,s.jsx)("div",{className:D().fadedImageContainer,children:(0,s.jsx)("img",{alt:"Two chibi friends clashing their swords",src:"/images/friends.png",style:{width:"100%"}})})}),(0,s.jsx)("div",{style:{position:"relative",marginTop:"2rem"},children:(0,s.jsxs)(d.VStack,{gap:"1rem",align:"center",children:[(0,s.jsx)(v.x,{size:2,weight:"500",mono:!1,tag:"p",appearance:"primary",align:"center",children:t}),(0,s.jsx)(v.x,{size:2,weight:"500",mono:!1,tag:"p",align:"center",appearance:"tertiary",maxChars:50,children:n})]})})]})})},Z=function(){var e,t,n=function(){return Z.free+Z.paid},o=(0,x.a)(),m=((0,y.useRouter)(),(0,O.P)()),p=(0,G.H)(895852),g=(0,l.useState)(!1),f=g[0],b=g[1],_=(0,l.useState)(!1),C=_[0],M=_[1],D=(0,l.useState)(),B=D[0],R=D[1],z=(0,l.useState)("allGames"),I=z[0],V=z[1],P=(0,q.B)(),Z=P.credits,Q=P.buyCredits;(0,l.useEffect)((function(){o?(0,a.Z)((function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([(0,j.wB)(o.uid)])];case 1:return e=r.Z.apply(void 0,[n.sent(),1]),(t=e[0])&&(null===t||void 0===t||t.sort((function(e,t){return(0,E.normalizeDate)(t.startDate)-(0,E.normalizeDate)(e.startDate)})),R(t)),[2]}}))}))():k.Am.info("You need to login to play Versus.")}),[null===o||void 0===o?void 0:o.uid]);var X=(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"Versus Battles | CSSBattle"},"title"),(0,s.jsx)("meta",{property:"og:title",content:"Versus Battles - CSSBattle"},"ogTitle")]});return m?m&&!(null===o||void 0===o||null===(e=o.userSettings)||void 0===e||null===(t=e.feature)||void 0===t?void 0:t.versus)?(0,s.jsxs)(s.Fragment,{children:[X,(0,s.jsx)(U.G,{message:"Versus locked? Ask someone with access to invite you to a battle to unlock Versus. Alternatively, keep an eye on our socials for invites."})]}):(0,s.jsxs)(s.Fragment,{children:[X,(0,s.jsxs)(d.VStack,{gap:"2rem",fullWidth:!0,children:[(0,s.jsx)(u.x,{icon:"versus",title:"Versus Battles",subtitle:"Challenge your friends and lock horns in these thrilling 1-on-1 CSSBattles!",beta:!0}),(0,s.jsxs)(d.HStack,{gap:"0.75rem",children:[(0,s.jsx)(W,{image:"/images/room-create.webp",title:"Create a room",onClick:function(){b(!0)}}),(0,s.jsx)(W,{image:"/images/room-join.webp",title:"Join a room",onClick:function(){M(!0)}})]}),(0,s.jsx)(T.l,{styles:{position:"absolute",top:"5rem",pointerEvents:"none",height:"50rem",opacity:.2}}),(0,s.jsx)(d.Spacer,{}),(0,s.jsxs)(d.HStack,{align:"flex-start",gap:"3rem",fullWidth:!0,responsive:!0,children:[(0,s.jsxs)(d.VStack,{gap:"2.5rem",align:"stretch",classes:"fxg-1",children:[(0,s.jsxs)(d.HStack,{justify:"space-between",children:[(0,s.jsx)(v.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Your past versus battles"}),(0,s.jsx)(A.s,{primary:!0,onChange:function(e){V(e.target.value)},value:I,options:[{label:"All games",value:"allGames"},{label:"Hosted",value:"hostedGames"},{label:"Joined",value:"participatedGames"}]})]}),B?(0,s.jsxs)(s.Fragment,{children:["allGames"===I&&(0,s.jsx)(d.VStack,{gap:"2rem",align:"stretch",children:B.length?B.map((function(e){return(0,s.jsx)(H,{fullWidth:!0,battle:e},e.id)})):(0,s.jsx)(J,{title:"No past versus battles!",description:"Want to challenge your friends for a 1-on-1 CSSBattle? You can try a battle using your monthly free credit!"})}),"hostedGames"===I&&(0,s.jsx)(Y,{filterBy:"hostedGames",finishedBattles:B,userId:o.uid}),"participatedGames"===I&&(0,s.jsx)(Y,{filterBy:"participatedGames",finishedBattles:B,userId:o.uid})]}):(0,s.jsx)(L.R,{children:"Fetching battles..."})]}),B&&(0,s.jsx)("div",{style:{minWidth:"20rem",width:"20rem",flex:"0 0 0"},children:(0,s.jsxs)(d.VStack,{align:"start",gap:"3rem",children:[(0,s.jsxs)(d.VStack,{align:"start",gap:"1rem",children:[(0,s.jsx)(v.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Credits"}),(0,s.jsx)(N.s,{children:(0,s.jsxs)(d.VStack,{align:"start",gap:"1.2rem",children:[(0,s.jsx)(v.x,{size:2,weight:"500",mono:!1,tag:"p",appearance:"secondary",children:"One credit from the Host is deducted when starting a game."}),(0,s.jsxs)("details",{className:"faq-section",children:[(0,s.jsxs)("summary",{className:"faq-section__question",children:["Credits : ",n()]}),(0,s.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,s.jsxs)("p",{style:{marginLeft:"1.5rem",marginBottom:"0.5rem"},children:["Earned : ",Z.free]}),(0,s.jsxs)("p",{style:{marginLeft:"1.5rem"},children:["Purchased : ",Z.paid]})]})]}),(0,s.jsx)(h.z,{disabled:!p,onClick:Q,children:0===n()?"Buy credits":"Buy more credits"})]})})]}),(0,s.jsxs)(d.VStack,{align:"start",fullWidth:!0,children:[(0,s.jsx)(v.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Your stats"}),(0,s.jsx)(F,{icon:"star",fullWidth:!0,value:B.length,description:"Games played"}),(0,s.jsx)(F,{icon:"trophy",fullWidth:!0,value:function(){var e=B.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.winner)===o.uid})).length,t=e/B.length*100||0,n=t.toFixed(2).includes(".00")?t.toFixed(0):t.toFixed(2);return"".concat(e," (").concat(n,"%)")}(),description:"Games won"})]})]})})]})]}),(0,s.jsx)(S,{isOpen:f,onRequestClose:function(){return b(!1)}}),(0,s.jsx)(w,{isOpen:C,onRequestClose:function(){return M(!1)}})]}):null}},2259:function(e){e.exports={battleMode:"BattleModeInfoPill_battleMode___alHa",versusBattleMode:"BattleModeInfoPill_versusBattleMode__Jo8rz",battleModeLarge:"BattleModeInfoPill_battleModeLarge__yo3LS",gameModeLabel:"BattleModeInfoPill_gameModeLabel__m7soO",gameModeLabelDesc:"BattleModeInfoPill_gameModeLabelDesc__INih3",closeBtn:"BattleModeInfoPill_closeBtn__f0ikT"}},497:function(e){e.exports={userAvatar:"VersusTile_userAvatar__OSh2G",userName:"VersusTile_userName__Sp_f7"}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},9721:function(e){e.exports={radioTabs:"RadioTabs_radioTabs__d9zDK",radioTabsFullWidth:"RadioTabs_radioTabsFullWidth__oq2fN",radioTabsPrimary:"RadioTabs_radioTabsPrimary__igl35",radioTabBtn:"RadioTabs_radioTabBtn__aLbrp",radioTabBtnPrimary:"RadioTabs_radioTabBtnPrimary__Nyq78",activeIndicator:"RadioTabs_activeIndicator___CbYq",activeIndicatorPrimary:"RadioTabs_activeIndicatorPrimary__8jTez"}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function n(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(n){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,a){if(!e||!t)return!1;const r=new Date(n(e.toDate?e.toDate():e,a)),i=new Date(n(t.toDate?t.toDate():t,a));return r.getDate()===i.getDate()&&r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return n.setDate(n.getDate()-1),t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:n,getRandomId:function(e=20){const t="abcdefghijklmnopqrstuvqxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let a=e;a--;)n+=t[~~(Math.random()*t.length)];return n},hasUnicodeChar:function(e){for(var t=0,n=e.length;t<n;t++)if(e.charCodeAt(t)>255)return!0;return!1}}}},function(e){e.O(0,[7564,5472,2041,9774,2888,179],(function(){return t=8495,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=versus-d7e80fd8435f0529.js.map