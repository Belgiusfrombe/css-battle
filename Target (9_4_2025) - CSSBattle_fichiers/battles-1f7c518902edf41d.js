(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4853],{3806:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/battles",function(){return n(8723)}])},3595:function(e,t,n){"use strict";n.d(t,{y:function(){return h}});var a=n(6383),r=n(2322),s=n(2784),i=n(9097),c=n.n(i),l=n(7037),o=n(3552),d=n(9318),u=n(9955),h=function(e){var t=e.numOfPlayersToShow,n=void 0===t?10:t,i=(0,s.useContext)(o.S),h=(0,s.useState)([]),f=h[0],g=h[1],m=(0,s.useState)({}),x=m[0],p=m[1],v=(0,s.useState)(),j=v[0],y=v[1],S=(0,a.Z)((0,d._)("showFriendsLeaderboard",!!i),2),b=S[0],w=S[1],k=(0,s.useState)({playerCount:0}),D=(k[0],k[1]);return(0,s.useEffect)((function(){(0,l.pc)().then(D)}),[]),(0,s.useEffect)((function(){y(!0),(b&&i?(0,l.uf)({userId:i.uid}):(0,l.bQ)(n)).then((function(e){if(g(e),y(!1),e.length||p({}),i&&e.length)if(e.find((function(e){return e.id===i.uid}))){var t=e.find((function(e){return e.id===i.uid}));p({rank:e.findIndex((function(e){return e.id===i.uid}))+1,score:t.score,totalPlayers:0})}else(0,l.r8)({userId:i.uid}).then((function(e){p(e)})).catch((function(e){console.log(e)}))}))}),[i?i.uid:"",b]),(0,r.jsx)(u.A,{type:"global",title:"All-time leaders",leaderboard:f,rankData:x,isFetchingLeaderboard:j,isFriendsMode:b,onLeaderboardFriendTypeChange:function(e){w("friends"===e.target.value)},noRankMessage:"You need at least a score of 10000 to see your rank.",footer:(0,r.jsx)(c(),{href:"/leaderboard",children:(0,r.jsx)("a",{className:"button button--full-width",children:"See top 100"})})})}},8431:function(e,t,n){"use strict";n.d(t,{x:function(){return u}});var a=n(2322),r=n(9604),s=n(5598),i=n(3196),c=n.n(i),l=n(7841),o=n(8329),d=n(2548),u=function(e){var t=e.icon,n=e.showProBadge,i=e.title,u=e.subtitle,h=e.beta;return(0,a.jsx)(d.E.div,{className:c().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)(s.VStack,{children:[t?(0,a.jsx)(r.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,n?(0,a.jsx)(o.Z,{height:"24"}):null,(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:i}),h?(0,a.jsx)("div",{className:"pill ",style:{position:"absolute",left:"100%",top:"-0.5rem"},children:"Beta"}):null]}),(0,a.jsx)("div",{style:{maxWidth:"72ch"},children:(0,a.jsx)(l.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},9376:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var a=n(2322),r=n(2784),s=r.useEffect,i=r.useRef,c=function(e){var t=e.children,n=e.opacity,r=i();return s((function(){var e=setInterval((function(){var e=.1*Math.random();r.current.querySelector("feTurbulence").setAttribute("baseFrequency","0 "+e)}),150);return function(){clearInterval(e)}}),[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"tv-glitch",style:{"--opacity":n},children:[(0,a.jsx)("svg",{children:(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"noise",x:"0%",y:"0%",width:"100%",height:"100%",ref:r,children:[(0,a.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0 0.000001",result:"NOISE",numOctaves:"2"}),(0,a.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"NOISE",scale:"100",xChannelSelector:"R",yChannelSelector:"R"})]})})}),(0,a.jsx)("img",{className:"tv-glitch__image",src:"/images/tv-glitch.png"}),t]})})}},8723:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(930),r=n(2322),s=n(2784),i=n(7729),c=n.n(i),l=n(5598),o=n(8431),d=n(7500),u=n(518),h=n(3595),f=n(7841),g=(n(5416),n(2367),n(9097)),m=n.n(g),x=n(8532),p=n(2220),v=n(6833),j=n(8316),y=n(6746),S=function(e){var t=e.battles,n=function(e){if("b"===e.key&&e.ctrlKey&&(document.querySelector(".mac-dock-container a").focus(),e.preventDefault()),"ArrowLeft"===e.key||"ArrowRight"===e.key){var t=document.activeElement;if(!(t&&t.closest&&t.closest(".dock-icon-wrapper")))return;e.preventDefault();var n=Array.from(document.querySelectorAll(".dock-icon-wrapper")),a=n.indexOf(t);n["ArrowLeft"===e.key?a>0?a-1:n.length-1:a<n.length-1?a+1:0].focus()}},a=(0,s.useState)(!1),i=a[0],c=a[1];(0,s.useEffect)((function(){return c(!0),function(){return c(!1)}}),[]),(0,s.useEffect)((function(){return window.addEventListener("keyup",n),function(){window.removeEventListener("keyup",n)}}),[]);var o=(0,r.jsx)("div",{className:"mac-dock-container",children:(0,r.jsxs)("div",{className:"mac-dock",children:[(0,r.jsx)("div",{className:"mac-dock-items",children:t.map((function(e){var t=(0,d.getBattleStatus)(e);return(0,r.jsxs)("div",{className:"dock-item",children:[(0,r.jsx)(m(),{href:"/battle/".concat(e.id),children:(0,r.jsxs)("a",{className:"dock-icon-wrapper",children:[(0,r.jsx)("div",{className:"dock-icon",children:e.levelIds&&e.levelIds[0]&&(0,r.jsx)("img",{src:"/targets/".concat(e.levelIds[0],".png"),alt:e.name,className:"icon-image"})}),t===d.BattleStatuses.ONGOING&&(0,r.jsx)("div",{className:"dock-item-status","data-status":t})]})}),(0,r.jsxs)("div",{className:"dock-tooltip",children:[(0,r.jsx)("div",{className:"tooltip-content",children:(0,r.jsxs)(l.VStack,{gap:"0.5rem",children:[(0,r.jsxs)(f.x,{weight:"600",size:2,mono:!1,appearance:"primary",children:["#",e.id," - ",e.name]}),(0,r.jsx)("div",{className:"tooltip-levels",children:e.levelIds.map((function(e){return(0,r.jsx)(m(),{href:"/play/".concat(e),children:(0,r.jsx)("a",{className:"level-thumbnail",children:(0,r.jsx)("img",{src:"/targets/".concat(e,".png"),alt:"Level ".concat(e),className:"level-image"})})},e)}))})]})}),(0,r.jsx)("div",{className:"tooltip-arrow"})]})]},e.id)}))}),(0,r.jsx)("div",{className:"mac-dock-controls",children:(0,r.jsx)(y.M,{value:"ctrl+b"})})]})});return i?j.createPortal(o,document.body):null},b=function(){var e=(0,s.useState)(!1),t=e[0],n=e[1],i=(0,a.Z)(d.battles);i.reverse();var g=i.findIndex((function(e){return(0,d.getBattleStatus)(e)===d.BattleStatuses.FINISHED}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"Battles | CSSBattle"},"title"),(0,r.jsx)("meta",{property:"og:title",content:"Battles - CSSBattle"},"ogTitle")]}),(0,r.jsx)("div",{style:{maxWidth:"100%"},children:(0,r.jsxs)(l.VStack,{gap:"3rem",children:[(0,r.jsxs)(l.VStack,{gap:"2rem",children:[(0,r.jsx)(o.x,{icon:"battle",title:"Battles",subtitle:"Compete with players around the world in these nail-biting battles"}),(0,r.jsxs)(l.HStack,{gap:"0.75rem",children:[(0,r.jsx)(p.z,{onClick:function(){n(!0)},children:"Host a private battle"}),(0,r.jsx)(m(),{href:"/advertise",children:(0,r.jsx)("a",{className:"button",children:"Advertise in a battle"})}),(0,r.jsx)(m(),{href:"/my-battles",children:(0,r.jsx)("a",{className:"button",children:"My battles"})})]})]}),(0,r.jsx)("div",{style:{width:"100%"},children:(0,r.jsx)(x.E,{})}),(0,r.jsxs)(l.HStack,{align:"flex-start",gap:"3rem",responsive:!0,children:[(0,r.jsxs)(l.VStack,{align:"stretch",gap:"3rem",children:[i.slice(0,g).length?(0,r.jsxs)(l.VStack,{align:"stretch",children:[(0,r.jsx)(f.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Play latest battle"}),i.slice(0,g).map((function(e){return(0,r.jsx)(u.d,{battle:e,fullWidth:!0},e.id)}))]}):null,(0,r.jsx)(l.VStack,{gap:"3rem",align:"stretch",children:(0,r.jsxs)(l.VStack,{align:"stretch",children:[(0,r.jsx)(f.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Play past battles"}),(0,r.jsx)(l.VStack,{gap:"2rem",align:"stretch",children:i.slice(g).map((function(e){return(0,r.jsx)(u.d,{battle:e},e.id)}))})]})})]}),(0,r.jsx)("div",{style:{minWidth:"18rem",width:"18rem",flex:"0 0 0"},children:(0,r.jsx)(h.y,{})})]})]})}),(0,r.jsx)(S,{battles:i}),(0,r.jsx)(v.w,{isOpen:t,onRequestClose:function(){return n(!1)}})]})}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function n(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(n){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,a){if(!e||!t)return!1;const r=new Date(n(e.toDate?e.toDate():e,a)),s=new Date(n(t.toDate?t.toDate():t,a));return r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return n.setDate(n.getDate()-1),t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:n,getRandomId:function(e=20){const t="abcdefghijklmnopqrstuvqxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let a=e;a--;)n+=t[~~(Math.random()*t.length)];return n},hasUnicodeChar:function(e){for(var t=0,n=e.length;t<n;t++)if(e.charCodeAt(t)>255)return!0;return!1}}}},function(e){e.O(0,[7564,2560,9955,9774,2888,179],(function(){return t=3806,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=battles-1f7c518902edf41d.js.map