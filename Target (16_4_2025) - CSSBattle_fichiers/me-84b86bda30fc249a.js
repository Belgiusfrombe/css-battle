(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8865],{4610:function(e,i,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/me",function(){return a(9724)}])},8431:function(e,i,a){"use strict";a.d(i,{x:function(){return u}});var r=a(2322),t=a(9604),s=a(5598),n=a(3196),o=a.n(n),c=a(7841),l=a(8329),d=a(2548),u=function(e){var i=e.icon,a=e.showProBadge,n=e.title,u=e.subtitle,h=e.beta;return(0,r.jsx)(d.E.div,{className:o().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,r.jsxs)(s.VStack,{children:[i?(0,r.jsx)(t.J,{size:"32",marginRight:"0",name:i,color:"var(--clr-brand)"}):null,a?(0,r.jsx)(l.Z,{height:"24"}):null,(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:n}),h?(0,r.jsx)("div",{className:"pill ",style:{position:"absolute",left:"100%",top:"-0.5rem"},children:"Beta"}):null]}),(0,r.jsx)("div",{style:{maxWidth:"72ch"},children:(0,r.jsx)(c.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},4987:function(e,i,a){"use strict";a.d(i,{O:function(){return c},s:function(){return l}});var r=a(2322),t=a(2548),s=a(2784),n=a(9721),o=a.n(n),c=function(e){var i=e.onChange,a=e.defaultChecked,s=e.selected,n=e.value,c=e.primary,l=e.highlightId,d=e.children;return(0,r.jsxs)("label",{className:"".concat(o().radioTabBtn," ").concat(c&&o().radioTabBtnPrimary),children:[(0,r.jsx)("input",{type:"radio",name:"tab",value:n,defaultChecked:a,onChange:i}),s?(0,r.jsx)(t.E.div,{layoutId:l,className:"".concat(o().activeIndicator," ").concat(c&&o().activeIndicatorPrimary)}):null,(0,r.jsx)("div",{style:{position:"relative",color:s?"var(--clr-link)":"var(--clr-text)",transition:"0.3s ease"},children:d})]})},l=function(e){var i=e.options,a=e.customOptions,t=e.onChange,n=e.value,l=e.fullWidth,d=void 0!==l&&l,u=e.primary,h=void 0!==u&&u,m=e.classes,f=void 0===m?"":m,v=(0,s.useId)();return(0,r.jsxs)("div",{className:"".concat(o().radioTabs," ").concat(d&&o().radioTabsFullWidth," ").concat(h&&o().radioTabsPrimary," ").concat(f),children:[i.map((function(e,i){return(0,r.jsx)(c,{onChange:t,value:e.value,selected:n===e.value,primary:h,highlightId:v,children:e.label},e.value)})),a]})}},9724:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return A}});var r=a(6383),t=a(930),s=a(2322),n=a(2784),o=a(7729),c=a.n(o),l=a(9097),d=a.n(l),u=a(5632),h=a(7500),m=a(7037),f=a(9241),v=a(1893),g=function(e){var i=e.className,a=void 0===i?"":i,r=e.ref,t=e.disabled,n=e.onChange,o=e.value,c=e.children;return(0,s.jsx)("div",{className:"select ".concat(a),children:(0,s.jsx)("select",{ref:r,disabled:t,onChange:n,value:o,children:c})})},p=a(5598),x=a(2367),y=a(1251),j=a(7414),b=a(865),S=a(6670),_=a(7274);function T(e){var i=e.columns,a=e.data,r=e.initialState,t=e.classes,n=(0,_.useTable)({columns:i,data:a,initialState:r},_.useSortBy),o=n.getTableProps,c=n.getTableBodyProps,l=n.headerGroups,d=n.rows,u=n.prepareRow,h=d;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("table",(0,S.Z)((0,b.Z)({},o()),{className:"table ".concat(t),style:{width:"100%"},children:[(0,s.jsx)("thead",{children:l.map((function(e){return(0,s.jsx)("tr",(0,S.Z)((0,b.Z)({},e.getHeaderGroupProps()),{children:e.headers.map((function(e){return(0,s.jsxs)("th",(0,S.Z)((0,b.Z)({},e.getHeaderProps(e.getSortByToggleProps())),{children:[e.render("Header"),(0,s.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),(0,s.jsx)("tbody",(0,S.Z)((0,b.Z)({},c()),{children:h.map((function(e,i){return u(e),(0,s.jsx)("tr",(0,S.Z)((0,b.Z)({},e.getRowProps()),{children:e.cells.map((function(e){return(0,s.jsx)("td",(0,S.Z)((0,b.Z)({},e.getCellProps()),{children:e.render("Cell")}))}))}))}))}))]}))})}var H=a(8431),P=a(5416),C=a(7841),w=a(9604),k=a(2548),D=a(4987),I=a(6415),N=a(7333),B=a(2141),z=a(5885),R=a(2220),E=a(7892),Z=a(206),M=a.n(Z),q={good:"#5f9c5f",okay:"#f4c265",bad:"#ea7777",disaster:"#ae3d3d",neutral:"#6591c3"},V=(0,k.E)(P.s),G=function(){var e=(0,v.a)(),i=(0,n.useState)([]),a=i[0],r=i[1],o=(0,n.useState)(!0),c=o[0],l=o[1];(0,n.useEffect)((function(){(null===e||void 0===e?void 0:e.isPro)&&(l(!0),(0,m.id)(e.uid).then(r).finally((function(){l(!1)})))}),[null===e||void 0===e?void 0:e.uid]);var d=(0,n.useState)(""),u=d[0],h=d[1],f=(0,n.useState)(!0),g=f[0],y=(f[1],(0,n.useState)([])),j=y[0],b=y[1];return(0,n.useEffect)((function(){if(u){var e=(0,t.Z)(a);g&&(e=e.filter((function(e){return 100===e.match}))),b(e)}}),[a.length]),(0,n.useEffect)((function(){var e=function(){return g?a.filter((function(e){return 100===e.match})):(0,t.Z)(a)};if(u)if(u){var i=(0,x.GS)(u),r=e().filter((function(e){var a=i.every((function(i){var a,r,t;return!("svg"!==i||!(null===(a=e.tags)||void 0===a?void 0:a.includes("svg")))||(!("unicode"!==i||!(null===(r=e.tags)||void 0===r?void 0:r.includes("unicode")))||(!("css"!==i||!(null===(t=e.tags)||void 0===t?void 0:t.includes("css")))||(e.code||"").toLowerCase().includes(i.toLowerCase())))}));return a}));b(r)}else b(e());else b([])}),[u,g]),(null===e||void 0===e?void 0:e.isPro)?(0,s.jsxs)(p.VStack,{gap:"1rem",align:"stretch",children:[(0,s.jsxs)(p.VStack,{gap:"0",align:"stretch",children:[(0,s.jsx)("div",{className:"input-container",children:(0,s.jsx)(k.E.input,{layout:!0,"aria-label":"Search. Accepts comma separated keywords",type:"text",placeholder:'Eg: svg, linear-gradient, "50px,50px"',onInput:function(e){return h(e.target.value)},className:M().submissionSearchInput,disabled:c})}),c&&(0,s.jsx)(C.x,{mono:!1,size:"1",weight:"500",children:"Loading your top submissions..."}),!c&&!u&&(0,s.jsx)(C.x,{mono:!1,size:"1",weight:"500",children:"Search through your top submissions for Battle targets"}),u&&0===j.length&&(0,s.jsx)(C.x,{mono:!1,size:"1",weight:"500",children:"No submissions found matching your search"})]}),(0,s.jsx)(p.VStack,{gap:"1rem",align:"stretch",children:j.map((function(e){return(0,s.jsx)(k.E.div,{className:"submissions-list__item",layout:!0,exit:{opacity:0},animate:{opacity:1},initial:{opacity:0},style:{marginBottom:"1rem"},children:(0,s.jsx)(L,{submission:e})},e.id)}))})]}):(0,s.jsx)(W,{children:"Upgrade to search across your top score submissions."})},L=function(e){var i,a=e.submission,r=(0,v.a)();return(0,s.jsx)(P.s,{classes:M().submissionTile,padding:"1rem",children:(0,s.jsxs)(p.VStack,{gap:"0.5rem",align:"stretch",children:[(0,s.jsxs)(p.HStack,{align:"flex-start",gap:"1rem",children:[(0,s.jsx)(p.VStack,{align:"stretch",gap:"0.1rem",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{height:"80",src:"/targets/".concat(a.levelId,".png"),style:{aspectRatio:"4 / 3",borderRadius:"0.5rem"}}),(0,s.jsx)("div",{class:"target-top-info",children:(0,s.jsxs)("p",{class:"target-top-info__pill",children:["#",a.levelId]})})]})}),(0,s.jsx)("div",{style:{flex:1,maxWidth:"60ch",maxHeight:"4.5lh",overflow:"auto"},children:(0,s.jsx)(I.ZP,{value:a.code,theme:"light"===(null===r||void 0===r||null===(i=r.settings)||void 0===i?void 0:i.theme)?N.Ym:N.hZ,extensions:[(0,B.dy)(),z.tk.lineWrapping]})}),(0,s.jsxs)(p.VStack,{gap:"0.5rem",children:[(0,s.jsx)(d(),{href:"/play/".concat(a.levelId),children:(0,s.jsx)("a",{className:"button button--primary",children:(0,s.jsx)(w.J,{name:"play",marginRight:"0"})})}),(0,s.jsx)(R.z,{onClick:function(){navigator.clipboard.writeText(a.code),E.Am.success("Copied to clipboard")},children:(0,s.jsx)(w.J,{name:"copy",marginRight:"0"})})]})]}),(0,s.jsxs)(p.HStack,{gap:"2rem",justify:"space-between",responsive:!0,children:[(0,s.jsxs)(C.x,{mono:!1,size:"1",weight:"600",children:["Score: ",a.score," ","{".concat(a.codeSize,"}"),","," ",a.match,"% match"]}),(0,s.jsx)(p.HStack,{gap:"1rem",justify:"flex-end",children:(0,s.jsxs)("div",{className:M().timeContainer,children:[(0,s.jsxs)("span",{className:M().relativeTime,children:[(0,x.VG)(new Date(a.timestamp))," ago"]}),(0,s.jsx)("span",{className:M().absoluteTime,children:(0,x.Jp)(a.timestamp)})]})})]})]})})},F=function(){var e,i=function(){var e=h.battles.find((function(e){return(0,h.getBattleStatus)(e)===h.BattleStatuses.ONGOING}));return e||(e=h.battles.filter((function(e){return(0,h.getBattleStatus)(e)===h.BattleStatuses.FINISHED})).pop()),e},a=(0,v.a)(),t=(0,u.useRouter)(),o=(0,j.P)(),c=(0,n.useRef)();(0,n.useEffect)((function(){a||(location.href="/login")}),[a]);var l=(0,n.useState)({}),d=l[0],b=l[1],S=(0,n.useState)(),_=S[0],H=S[1];(0,n.useEffect)((function(){var e,a=null===(e=t.query)||void 0===e?void 0:e.battle;if(a){if("all"===a)return void H({levelIds:h.battles.reduce((function(e,i){return e.concat(i.levelIds)}),[])});var r=h.battles.find((function(e){return e.id===+a}));H(r||i())}else H(i())}),[null===(e=t.query)||void 0===e?void 0:e.battle]);var P=(0,n.useState)(!1),C=P[0],w=P[1],D=(0,n.useState)([]),I=D[0],N=D[1];(0,n.useEffect)((function(){a&&_&&(w(!0),Promise.all([a.isPro?(0,m.d)(_.levelIds.filter((function(e){return e}))):Promise.resolve([]),c.current?Promise.resolve(c.current):(0,m.wd)({playerId:a.uid})]).then((function(e){var i=(0,r.Z)(e,2),a=i[0],t=i[1];c.current=t;var s=_.levelIds.filter((function(e){return e})).map((function(e){var i,r,s,n=a.find((function(i){return e===(null===i||void 0===i?void 0:i.levelId)})),o=t[e]||{};return{targetId:e,codeDiff:o.codeSize-(null===n||void 0===n||null===(i=n.highscore)||void 0===i?void 0:i.codeSize),myHighscore:o,leaderHighscore:null===n||void 0===n?void 0:n.highscore,scoreDiff:(null===n||void 0===n||null===(r=n.highscore)||void 0===r?void 0:r.score)-o.score,leaderProfile:null===n||void 0===n||null===(s=n.highscore)||void 0===s?void 0:s.playerProfile}})),n=0,o=0,l=0,d=0;s.map((function(e){e.codeDiff>n&&(n=e.codeDiff),e.scoreDiff>o&&(o=e.scoreDiff),e.myHighscore.codeSize>l&&(l=e.myHighscore.codeSize),e.myHighscore.score>d&&(d=e.myHighscore.score)})),b({maxCharDiff:n,maxCodeSize:l,maxScore:d,maxScoreDiff:o,charDiffBreakpoints:[~~(n/3),~~(n/3*2)],scoreDiffBreakpoints:[~~(o/3),~~(o/3*2)]}),N(s)})).finally((function(){w(!1)})))}),[a?a.uid:"",null===_||void 0===_?void 0:_.id]);var B=(0,n.useMemo)((function(){var e=[{Header:"Target",accessor:"target"},{Header:"Match",accessor:"match"},{Header:"My Score",accessor:"score",sortType:function(e,i){return e.original.myHighscore.score?i.original.myHighscore.score?e.original.myHighscore.score-i.original.myHighscore.score:1:-1}}];return(null===a||void 0===a?void 0:a.isPro)&&(e.push({Header:"Top Score",accessor:"topScore",disableSortBy:!0}),e.push({Header:"Score Diff",accessor:"scoreDiffRender",sortType:function(e,i){return e.original.myHighscore.score?i.original.myHighscore.score?e.original.scoreDiff-i.original.scoreDiff:1:-1}})),e.push({Header:"My chars",accessor:"myChars",sortType:function(e,i){return e.original.myHighscore.score?i.original.myHighscore.score?e.original.myHighscore.codeSize-i.original.myHighscore.codeSize:1:-1}}),(null===a||void 0===a?void 0:a.isPro)&&(e.push({Header:"Top chars",accessor:"topChars",disableSortBy:!0}),e.push({Header:"Char Diff",accessor:"charDiff",sortType:function(e,i){return e.original.myHighscore.score?i.original.myHighscore.score?e.original.myHighscore.match<100?-1:i.original.myHighscore.match<100?1:e.original.codeDiff-i.original.codeDiff:1:-1}}),e.push({Header:"Last played",accessor:"lastPlayed",sortType:function(e,i){return e.original.myHighscore.score?i.original.myHighscore.score?e.original.timeInSeconds-i.original.timeInSeconds:1:-1}})),e}),[null===a||void 0===a?void 0:a.isPro]),z=(0,n.useMemo)((function(){return I.map((function(e){var i,r=e.targetId,t=e.leaderHighscore,n=e.myHighscore,o=e.codeDiff,c=e.scoreDiff,l=e.leaderProfile;return{myHighscore:n,scoreDiff:c,codeDiff:o,target:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 0"},children:[(0,s.jsx)("a",{href:"/play/".concat(r),style:{display:"flex"},children:(0,s.jsx)("img",{src:"https://cssbattle.dev/targets/".concat(r,".png"),width:"50",alt:"",style:{aspectRatio:"4 / 3",borderRadius:"6px"}})}),(0,s.jsxs)("span",{children:["#",r]})]}),match:100===n.match?"\u2705":n.match?"\ud83d\udd34 ".concat(n.match,"%"):"-",score:n.score?(0,s.jsx)(O,{value:n.score,max:d.maxScore,color:n.score<600?"indianred":void 0,showChart:a.isPro}):"-",topScore:(0,s.jsxs)(p.Stack,{gap:"0.5rem",align:"center",children:[(0,s.jsx)(y.qE,{small:!0,size:"25",url:null===l||void 0===l?void 0:l.avatar,username:null===l||void 0===l?void 0:l.username,userId:null===l||void 0===l?void 0:l.id}),(0,s.jsx)("span",{children:null===t||void 0===t?void 0:t.score})]}),scoreDiffRender:n.score?(0,s.jsx)(O,{value:Math.trunc(100*c)/100,max:d.maxScoreDiff,color:c<d.scoreDiffBreakpoints[0]?q.green:c>d.scoreDiffBreakpoints[1]?q.bad:q.okay,showChart:!0}):"-",myChars:n.score?(0,s.jsx)(O,{label:"{".concat(n.codeSize,"}"),value:n.codeSize,max:d.maxCodeSize,color:100===n.match?void 0:q.disaster,showChart:a.isPro}):"-",topChars:"{".concat(null===t||void 0===t?void 0:t.codeSize,"}"),charDiff:n.score&&100===n.match?(0,s.jsx)(O,{label:"{".concat(o,"}"),value:o,max:d.maxCharDiff,color:o<d.charDiffBreakpoints[0]?q.good:o>d.charDiffBreakpoints[1]?q.bad:q.okay,showChart:!0}):"-",timeInSeconds:null===(i=n.lastUpdated)||void 0===i?void 0:i.seconds,lastPlayed:n.score?"".concat((0,x.VG)(1e3*n.lastUpdated.seconds)," ago"):"-"}}))}),[I]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"",children:a&&o?(0,s.jsx)("div",{className:"",children:(0,s.jsxs)(p.VStack,{gap:"1rem",align:"center",children:[(0,s.jsx)("div",{className:"input-container",children:(0,s.jsxs)(g,{className:"width--full",onChange:function(e){t.push({query:{tab:"battleStats",battle:e.target.value}},void 0,{scroll:!1})},value:_.id,children:[(0,s.jsx)("option",{value:"all",children:"All battles"},"0"),h.battles.map((function(e){return(0,s.jsxs)("option",{value:e.id,children:["Battle #",e.id," - ",e.name]},e.id)}))]})}),C?(0,s.jsx)(k.E.p,{className:"ta-c",style:{margin:"1rem 0"},initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,s.jsx)(f.R,{children:"Loading your stats..."})}):null,I.length?(0,s.jsx)(k.E.div,{layout:!0,initial:!1,animate:!1,style:{opacity:C?.7:1,filter:"blur(".concat(C?"3px":"0px",")")},children:(0,s.jsx)(V,{children:(0,s.jsx)(T,{columns:B,data:z,classes:"my-stats-table",initialState:(null===a||void 0===a?void 0:a.isPro)?{sortBy:[{id:"scoreDiffRender",desc:!0}]}:void 0})})}):null,I.length&&!a.isPro?(0,s.jsx)(W,{children:"Upgrade to PLUS to get advanced analytics for your targets."}):null]})}):null})})};function O(e){var i=e.value,a=e.max,r=e.color,t=void 0===r?q.neutral:r,n=e.label,o=e.showChart;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.8rem"},children:[o&&(0,s.jsx)("div",{style:{width:80},children:(0,s.jsx)("div",{style:{transition:"width 0.5s ease",width:"".concat(i/a*100,"%"),height:20,background:t,borderRadius:"999px"}})}),(0,s.jsx)("div",{children:n||i})]})}var W=function(e){var i=e.children;return(0,s.jsx)(P.s,{children:(0,s.jsxs)(p.VStack,{gap:"1.5rem",children:[(0,s.jsx)(C.x,{mono:!1,weight:500,size:"1",children:i}),(0,s.jsxs)(p.HStack,{children:[(0,s.jsx)(d(),{href:"/plus",children:(0,s.jsx)("a",{className:"button button--cssbattle",children:"Upgrade to Plus"})}),(0,s.jsx)("a",{href:"https://cssbattle.dev/blog/advanced-analytics",className:"button",children:(0,s.jsxs)(p.HStack,{gap:"0.25rem",children:["Learn more",(0,s.jsx)(w.J,{name:"link",size:"12",color:"var(--clr-text-light)"})]})})]})]})})},A=function(){var e,i=(0,j.P)(),a=(0,u.useRouter)(),r=(0,n.useState)(),t=r[0],o=r[1];(0,n.useEffect)((function(){var e;(null===(e=a.query)||void 0===e?void 0:e.tab)?o(a.query.tab):o("battleStats")}),[null===(e=a.query)||void 0===e?void 0:e.tab]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"My Analytics | CSSBattle"},"title"),(0,s.jsx)("meta",{property:"og:title",content:"My Analytics | CSSBattle"},"ogTitle")]}),(0,s.jsx)(H.x,{icon:"stats",title:"Your stats"}),(0,s.jsxs)(p.VStack,{gap:"3rem",children:[(0,s.jsx)("div",{children:(0,s.jsx)(D.s,{primary:!0,options:[{label:"Battle Stats",value:"battleStats"},{label:"Search Top Submissions",value:"searchTopSolutions"}],value:t,onChange:function(e){a.push({query:{tab:e.target.value}},void 0,{scroll:!1})}})}),i&&"battleStats"===t&&(0,s.jsx)(F,{}),i&&"searchTopSolutions"===t&&(0,s.jsx)(G,{})]})]})}},206:function(e){e.exports={submissionTile__code:"Me_submissionTile__code___pcip",submissionTile:"Me_submissionTile__pdwIC",timeContainer:"Me_timeContainer___a2qA",absoluteTime:"Me_absoluteTime__LLsHl",relativeTime:"Me_relativeTime__xrT88",codeContainer:"Me_codeContainer__GDwBz",submissionSearchInput:"Me_submissionSearchInput__EGGJn"}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},9721:function(e){e.exports={radioTabs:"RadioTabs_radioTabs__d9zDK",radioTabsFullWidth:"RadioTabs_radioTabsFullWidth__oq2fN",radioTabsPrimary:"RadioTabs_radioTabsPrimary__igl35",radioTabBtn:"RadioTabs_radioTabBtn__aLbrp",radioTabBtnPrimary:"RadioTabs_radioTabBtnPrimary__Nyq78",activeIndicator:"RadioTabs_activeIndicator___CbYq",activeIndicatorPrimary:"RadioTabs_activeIndicatorPrimary__8jTez"}}},function(e){e.O(0,[8917,2152,3099,9774,2888,179],(function(){return i=4610,e(e.s=i);var i}));var i=e.O();_N_E=i}]);
//# sourceMappingURL=me-84b86bda30fc249a.js.map