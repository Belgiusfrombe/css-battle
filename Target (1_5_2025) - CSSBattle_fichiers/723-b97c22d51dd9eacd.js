(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{2173:function(e,t,a){"use strict";a.d(t,{c:function(){return p}});var i=a(2322),n=a(9097),r=a.n(n),s=a(2784),l=a(7037),o=a(5598),c=a(4807),d=(a(9241),a(9604)),u=a(4030),h=a(1551),g=a(1893),y=function(e){var t=e.width;return(0,i.jsx)("div",{className:"skeleton",style:{width:t}})},m=a(2367),v=a(3552),x=a(8387),p=function(e){var t=e.target,a=e.showDateInside,n=e.lazy,p=void 0===n||n,f=(0,g.a)(),j=(0,s.useState)(!1),T=j[0],b=j[1],_=(0,s.useState)(),S=_[0],k=_[1],N=(0,s.useState)(""),w=N[0],D=N[1],C=(0,s.useContext)(v.k).streak;(0,s.useEffect)((function(){S&&t&&D((0,m.qA)({score:S.score,codeSize:S.codeSize,levelId:t.id,isDaily:!0,date:t.formattedDate,streak:null===C||void 0===C?void 0:C.count}))}),[t,S]),(0,s.useEffect)((function(){"dummy"!==t.id&&(null===f||void 0===f?void 0:f.uid)&&(b(!0),(0,l.kP)({playerId:f.uid,levelId:t.id}).then((function(e){k(e)})).finally((function(){b(!1)})))}),[null===t||void 0===t?void 0:t.id,null===f||void 0===f?void 0:f.uid]);var z=(0,u.isTodaysDailyTarget)(t),P=(0,u.isYesterdaysDailyTarget)(t);return(0,i.jsxs)(o.VStack,{gap:"1rem",children:[!a&&(0,i.jsxs)("div",{className:"pill ".concat(S?"pill--success":""," "),children:[S?(0,i.jsx)(d.J,{name:"tick-round",size:"1em",color:"white"}):null," ",t.formattedDate,z?" (Today) ":""]}),(0,i.jsx)("div",{className:z?"target-today":"",children:(0,i.jsx)(c.i,{target:t,data:S,showTags:a,lazy:p,useCdnUrl:!0,children:(0,i.jsx)("div",{style:{padding:"1rem 1rem 0.5rem"},children:"dummy"!==t.id?(0,i.jsxs)(o.HStack,{justify:"space-between",children:[(0,i.jsx)("div",{className:"daily-target-text",children:(0,i.jsxs)(o.VStack,{gap:"0",align:"flex-start",children:[(0,i.jsx)("p",{className:"daily-target-text__title",children:"Your score"}),(0,i.jsx)("div",{className:"daily-target-text__score",children:T?(0,i.jsx)(y,{width:"6ch"}):S?"".concat(S.score||S.overall.score," {").concat(S.codeSize||S.overall.codeSize,"}"):"Not played"})]})}),(0,i.jsxs)(o.HStack,{extend:!0,gap:"0.5rem",children:[z&&S?(0,i.jsx)("a",{href:"https://twitter.com/share?url=https://cssbattle.dev/play/".concat(null===t||void 0===t?void 0:t.id,"&text=").concat(w,"&hashtags=CSSBattleChallenge&via=css_battle&related=css_battle"),target:"_blank",rel:"external noopener noreferrer",className:"button button--circular",children:(0,i.jsx)(d.J,{name:"twitter",color:"var(--clr-text-light)",marginRight:"0",size:"20"})}):null,P&&!(null===f||void 0===f?void 0:f.isPro)?(0,i.jsx)(r(),{href:{pathname:"/play/".concat(t.id),query:{openTopSolutions:!0}},children:(0,i.jsx)("a",{className:(0,u.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(d.J,{name:"open-book",color:(0,u.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):z||(null===f||void 0===f?void 0:f.isPro)?(0,i.jsx)(r(),{href:"/play/".concat(t.id),children:(0,i.jsx)("a",{className:(0,u.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(d.J,{name:"play",color:(0,u.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):(0,i.jsx)(x.Z,{})]})]}):(0,i.jsxs)("div",{className:"daily-target-text",children:[(0,i.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,i.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,i.jsx)(h.W,{showEmoji:!1,suffix:"",date:1e3*t.date,size:"0.1",showUnits:!1})})]})})})})]})}},3638:function(e,t,a){"use strict";a.d(t,{J:function(){return u}});var i=a(2322),n=a(2784),r=a(7037),s=a(5416),l=a(5598),o=a(9241),c=a(2173),d=a(2367),u=function(e){var t=e.showFreeOnly,a=e.count,u=void 0===a?6:a,h=(0,n.useState)(),g=h[0],y=h[1];return(0,n.useEffect)((function(){(0,r.rz)(u).then((function(e){var a=e.slice();a.forEach((function(e,t){e.formattedDate=(0,d.dQ)(e.startDate)})),(t||(0,d.tq)())&&(a=a.slice(0,2));var i=+new Date(a[0].startDate.seconds)+86400;a.reverse().push({id:"dummy",image:"/targets/0.png?v=2",formattedDate:"Tomorrow",date:i}),y(a)}))}),[]),(0,n.useEffect)((function(){if(!(0,d.tq)()){var e=document.querySelector(".target-today");e&&e.scrollIntoView({inline:"center",block:"nearest"})}}),[g]),(0,i.jsxs)(s.s,{padding:"0",topFocus:t,children:[(0,i.jsx)("div",{style:{padding:"2rem"},className:"home-daily-target-panel no-scrollbar",children:g?(0,i.jsx)(l.HStack,{gap:"2rem",align:"flex-start",justify:t&&!(0,d.tq)()?"center":"flex-start",children:g.map((function(e,a){return(0,i.jsx)("div",{style:{paddingLeft:0!=a||(0,d.tq)()||t?0:"10%",paddingRight:"dummy"!=e.id||t?0:"40%"},children:(0,i.jsx)(c.c,{target:e,lazy:!1})},e.id)}))}):(0,i.jsx)(o.R,{children:"Fetching Daily targets..."})}),(0,i.jsx)("div",{className:"".concat(!t&&"daily-targets-shadowed")})]})}},8431:function(e,t,a){"use strict";a.d(t,{x:function(){return u}});var i=a(2322),n=a(9604),r=a(5598),s=a(3196),l=a.n(s),o=a(7841),c=a(8329),d=a(2548),u=function(e){var t=e.icon,a=e.showProBadge,s=e.title,u=e.subtitle,h=e.beta;return(0,i.jsx)(d.E.div,{className:l().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)(r.VStack,{children:[t?(0,i.jsx)(n.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,a?(0,i.jsx)(c.Z,{height:"24"}):null,(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(o.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:s}),h?(0,i.jsx)("div",{className:"pill ",style:{position:"absolute",left:"100%",top:"-0.5rem"},children:"Beta"}):null]}),(0,i.jsx)("div",{style:{maxWidth:"72ch"},children:(0,i.jsx)(o.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},4987:function(e,t,a){"use strict";a.d(t,{O:function(){return o},s:function(){return c}});var i=a(2322),n=a(2548),r=a(2784),s=a(9721),l=a.n(s),o=function(e){var t=e.onChange,a=e.defaultChecked,r=e.selected,s=e.value,o=e.primary,c=e.highlightId,d=e.children;return(0,i.jsxs)("label",{className:"".concat(l().radioTabBtn," ").concat(o&&l().radioTabBtnPrimary),children:[(0,i.jsx)("input",{type:"radio",name:"tab",value:s,defaultChecked:a,onChange:t}),r?(0,i.jsx)(n.E.div,{layoutId:c,className:"".concat(l().activeIndicator," ").concat(o&&l().activeIndicatorPrimary)}):null,(0,i.jsx)("div",{style:{position:"relative",color:r?"var(--clr-link)":"var(--clr-text)",transition:"0.3s ease"},children:d})]})},c=function(e){var t=e.options,a=e.customOptions,n=e.onChange,s=e.value,c=e.fullWidth,d=void 0!==c&&c,u=e.primary,h=void 0!==u&&u,g=e.classes,y=void 0===g?"":g,m=(0,r.useId)();return(0,i.jsxs)("div",{className:"".concat(l().radioTabs," ").concat(d&&l().radioTabsFullWidth," ").concat(h&&l().radioTabsPrimary," ").concat(y),children:[t.map((function(e,t){return(0,i.jsx)(o,{onChange:n,value:e.value,selected:s===e.value,primary:h,highlightId:m,children:e.label},e.value)})),a]})}},723:function(e,t,a){"use strict";a.r(t),a.d(t,{DailyTargetsStatsTile:function(){return E},default:function(){return U}});var i=a(2322),n=a(2784),r=a(7729),s=a.n(r),l=a(3638),o=a(5598),c=a(5314),d=a.n(c),u=a(9604),h=a(8431),g=a(8329),y=a(7841),m=a(4987),v=a(8788),x=a(930),p=a(2970),f=a(7037),j=a(5923),T=a.n(j),b=a(2173),_=a(1893),S=a(9241),k=a(5416),N=a(2367),w=a(2220),D=a(5632),C=a(9097),z=a.n(C),P=a(7567),F="All targets",I="Played",M="Not played",R=function(e,t){return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]," ").concat(e)},q=function(e){var t,a,r=e.filter,s=e.onAllFilterClick,l=(0,n.useState)(),c=l[0],d=l[1],u=(0,n.useState)(),h=u[0],g=u[1],m=(0,n.useState)(!0),j=m[0],T=m[1],b=(0,D.useRouter)(),w=(0,n.useState)(),C=w[0],F=w[1];(0,n.useEffect)((function(){var e=new Date;b.query.year&&b.query.month&&(e.setUTCFullYear(b.query.year),e.setUTCMonth(b.query.month-1)),document.startViewTransition?document.startViewTransition((function(){F(e)})):F(e)}),[null===(t=b.query)||void 0===t?void 0:t.year,null===(a=b.query)||void 0===a?void 0:a.month]);var R=(0,_.a)(),q=function(){var e=(0,v.Z)((function(e){var t,a,i,n;return(0,p.__generator)(this,(function(r){switch(r.label){case 0:return t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)),a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth()+1,0)),i=(0,N.p4)(),a>i&&(a=i),(null===c||void 0===c?void 0:c.some((function(e){var a=e.startDate.toDate();return a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()})))?[2]:[4,(0,f.aY)(t,a)];case 1:return n=r.sent(),T(!1),[4,V(n)];case 2:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,v.Z)((function(e){var t,a,i,n,r,s,l;return(0,p.__generator)(this,(function(o){t=e.slice(),a=!0,i=!1,n=void 0;try{for(r=function(){var e=l.value;e.formattedDate=(0,N.dQ)(e.startDate),(null===R||void 0===R?void 0:R.uid)&&(0,f.kP)({playerId:R.uid,levelId:e.id}).then((function(t){t&&(e.isPlayed=!0)}))},s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)r()}catch(c){i=!0,n=c}finally{try{a||null==s.return||s.return()}finally{if(i)throw n}}return d((function(e){return(0,x.Z)(new Set((0,x.Z)(e||[]).concat((0,x.Z)(t))))})),T(!1),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){C&&q(C)}),[C]),(0,n.useEffect)((function(){c&&(g(r===I?c.filter((function(e){return e.isPlayed})):r===M?c.filter((function(e){return!e.isPlayed})):c),T(!1))}),[r,c]),j?(0,i.jsx)(S.a,{}):h&&!h.length?(0,i.jsx)(k.s,{onlyBorder:!0,children:(0,i.jsxs)(o.VStack,{children:[(0,i.jsx)(y.x,{mono:!1,size:"1",weight:"500",children:"No targets found for this filter"}),(0,i.jsx)("button",{className:"button",onClick:s,children:"View all targets"})]})}):h?(0,i.jsxs)(o.VStack,{gap:"2rem",align:"stretch",children:[(0,i.jsx)(Y,{targets:h,onMonthChange:q,date:C}),!(null===R||void 0===R?void 0:R.isPro)&&(0,i.jsxs)(o.VStack,{gap:"1rem",align:"stretch",children:[(0,i.jsx)(o.HStack,{justify:"center",children:(0,i.jsxs)(y.x,{mono:!1,size:"1",weight:"500",children:["Unlock ",P.P7,"+ of these past Daily targets with PLUS!"]})}),(0,i.jsx)(o.HStack,{justify:"center",children:(0,i.jsx)(z(),{href:"/plus",children:(0,i.jsx)("a",{className:"button button--cssbattle",children:"Upgrade to PLUS"})})})]})]}):void 0},Y=function(e){var t=e.date,a=e.targets,r=(0,D.useRouter)(),s=t,l=(0,n.useRef)(),c=2023===s.getFullYear()&&5===s.getMonth();return(0,i.jsxs)(o.VStack,{gap:"2rem",align:"stretch",children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)(w.z,{onClick:function(){var e=new Date(s.getFullYear(),s.getMonth()-1,1);r.push({query:{month:e.getMonth()+1,year:e.getFullYear()}},void 0,{scroll:!1})},disabled:c,extraClasses:"daily-targets-calendar-prev-button",children:(0,i.jsx)("span",{style:{transform:"rotate(180deg)"},children:(0,i.jsx)(u.J,{name:"chevron-right",size:"1em",marginRight:"0"})})}),(0,i.jsxs)("label",{onClick:function(){return l.current.showPicker()},className:"relative",children:[(0,i.jsx)(y.x,{size:"2",weight:"600",mono:!1,tag:"h2",appearance:"primary",classes:"daily-targets-calendar-month-title",children:s.toLocaleString("default",{month:"long",year:"numeric"})}),(0,i.jsx)("input",{ref:l,style:{visibility:"hidden",position:"absolute",inset:0},type:"month",min:"2023-06",value:s.toISOString().split("T")[0].split("-").slice(0,2).join("-"),onChange:function(e){r.push({query:{month:parseInt(e.target.value.split("-")[1],10),year:e.target.value.split("-")[0]}},void 0,{scroll:!1})}})]}),(0,i.jsx)(w.z,{onClick:function(){var e=new Date(s.getFullYear(),s.getMonth()+1,1);r.push({query:{month:e.getMonth()+1,year:e.getFullYear()}},void 0,{scroll:!1})},extraClasses:"daily-targets-calendar-next-button",children:(0,i.jsx)(u.J,{name:"chevron-right",size:"1em",marginRight:"0"})})]}),(0,i.jsxs)("div",{className:T().calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return(0,i.jsx)("div",{className:"calendar__weekdays",style:{textAlign:"center",fontWeight:"bold",textTransform:"uppercase"},children:e},e)})),function(){for(var e=function(e){var t=a.filter((function(t){var a=t.startDate.toDate(),i=a.getUTCDate(),n=a.getUTCMonth(),r=a.getUTCFullYear();return i===e&&n===s.getMonth()&&r===s.getFullYear()}))[0];r.push((0,i.jsx)("div",{className:"target-primary",style:{height:"100%"},children:t?(0,i.jsx)(b.c,{target:t,showDateInside:!0}):(0,i.jsxs)("div",{className:"target-tile--daily target-tile",style:{blockSize:"100%",minBlockSize:"4rem",pointerEvents:"none"},children:[(0,i.jsx)("div",{className:"target-tile__image"}),(0,i.jsx)("div",{className:"target-tile__info",children:(0,i.jsx)("div",{className:"target-top-info",children:(0,i.jsx)("p",{className:"target-top-info__pill",children:R(e,s.getMonth())})})})]})},"day-".concat(e)))},t=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}(s),n=function(e){return new Date(e.getFullYear(),e.getMonth(),1).getDay()}(s),r=[],l=0;l<n;l++)r.push((0,i.jsx)("div",{className:"target-primary",style:{height:"100%"},children:(0,i.jsx)("div",{className:"target-tile--daily target-tile",style:{height:"100%",pointerEvents:"none",opacity:.5}})},"empty-".concat(l)));for(var o=1;o<=t;o++)e(o);return r}()]})]})},V=a(2548),E=function(e){var t=e.icon,a=e.name,n=e.value,r=e.naked;return(0,i.jsx)("div",{className:"".concat(d().statsTile," ").concat(r?d().statsTileNaked:""),children:(0,i.jsxs)(o.HStack,{gap:"0",children:[(0,i.jsx)("div",{className:d().statsTileIcon,children:(0,i.jsx)(u.J,{name:t,size:"1.5rem",marginRight:"0"})}),(0,i.jsx)("div",{className:d().statsTileText,children:(0,i.jsxs)(o.VStack,{align:"flex-start",gap:"0",children:[(0,i.jsx)("p",{className:d().statsTileName,children:a}),(0,i.jsx)("p",{className:d().statsTileValue,children:n})]})})]})})},U=function(){var e=(0,_.a)(),t=(0,n.useState)(F),a=t[0],r=t[1],c=(0,n.useState)(),d=c[0],u=c[1];return(0,n.useEffect)((function(){(null===e||void 0===e?void 0:e.uid)&&(0,f.QC)(e.uid).then((function(e){u(e)}))}),[null===e||void 0===e?void 0:e.uid]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Daily Targets | CSSBattle"},"title"),(0,i.jsx)("meta",{property:"og:title",content:"Daily Targets - CSSBattle"},"ogTitle")]}),(0,i.jsx)(h.x,{icon:"daily-targets",title:"Daily Targets",subtitle:"A new target everyday for you to unwind. No leaderboards, no competition"}),(0,i.jsx)(V.E.div,{style:{marginTop:"3rem"},initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsx)(l.J,{showFreeOnly:!0,count:2})}),!!d&&(0,i.jsx)(V.E.div,{layout:!0,style:{marginTop:"2rem"},initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:(0,i.jsx)(k.s,{children:(0,i.jsxs)(o.VStack,{align:"stretch",children:[(0,i.jsx)(y.x,{size:"3",weight:"600",mono:!1,tag:"h2",appearance:"primary",children:"Your overall stats"}),(0,i.jsxs)(o.HStack,{gap:"1rem",justify:"stretch",responsive:!0,children:[(0,i.jsx)(E,{icon:"target",name:"Targets played",value:d.playedCount}),(0,i.jsx)(E,{icon:"percent",name:"Avg match percent",value:d.averageMatch+"%"}),(0,i.jsx)(E,{icon:"characters",name:"Avg characters",value:d.averageCodeSize}),(0,i.jsx)(E,{icon:"tags",name:"Most used properties",value:d.properties.slice(0,3).join(", ")})]})]})})}),(0,i.jsx)("div",{style:{marginTop:"4rem"},initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:(0,i.jsxs)(o.VStack,{gap:"2rem",align:"stretch",children:[(0,i.jsxs)(o.HStack,{justify:"space-between",responsive:!0,children:[(0,i.jsxs)(o.VStack,{gap:"0.5rem",align:"flex-start",children:[(0,i.jsxs)(o.HStack,{gap:"0.5rem",children:[(0,i.jsx)(y.x,{size:"3",weight:"600",mono:!1,tag:"h2",appearance:"primary",children:"Previous targets"}),(0,i.jsx)(g.Z,{})]}),(0,i.jsx)("div",{style:{maxWidth:"64ch"},children:(0,i.jsx)(y.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",children:"Want more? Play the previously released targets. You can also view the top solutions of all previous targets"})})]}),(0,i.jsx)(m.s,{options:[{label:F,value:F},{label:M,value:M},{label:I,value:I}],value:a,onChange:function(e){r(e.target.value)},primary:!0})]}),(0,i.jsx)(q,{filter:a,onAllFilterClick:function(){r(F)}})]})})]})}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},5923:function(e){e.exports={calendarGrid:"PreviousDailyTargets_calendarGrid__0hDp4"}},9721:function(e){e.exports={radioTabs:"RadioTabs_radioTabs__d9zDK",radioTabsFullWidth:"RadioTabs_radioTabsFullWidth__oq2fN",radioTabsPrimary:"RadioTabs_radioTabsPrimary__igl35",radioTabBtn:"RadioTabs_radioTabBtn__aLbrp",radioTabBtnPrimary:"RadioTabs_radioTabBtnPrimary__Nyq78",activeIndicator:"RadioTabs_activeIndicator___CbYq",activeIndicatorPrimary:"RadioTabs_activeIndicatorPrimary__8jTez"}},5314:function(e){e.exports={statsTile:"daily_statsTile__iIBQR",statsTileNaked:"daily_statsTileNaked__4qSJf",statsTileText:"daily_statsTileText__pvZFR",statsTileIcon:"daily_statsTileIcon__0sSAw",statsTileName:"daily_statsTileName__55m00",statsTileValue:"daily_statsTileValue__5VzaP"}}}]);
//# sourceMappingURL=723-b97c22d51dd9eacd.js.map