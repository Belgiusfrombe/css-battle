(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3531],{1311:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play/[levelId]",function(){return t(5370)}])},1942:function(e,n,t){"use strict";t.d(n,{N:function(){return a}});var s=t(2322);function a(){return(0,s.jsxs)("div",{className:"friends-empty",children:[(0,s.jsx)("img",{alt:"Two chibi friends clashing their swords",src:"/images/friends.png"}),(0,s.jsx)("p",{className:"friends-empty__title",children:"Add friends!"}),(0,s.jsx)("p",{className:"friends-empty__desc",children:"Want to see where you stand only among your friends? Visit their profile and add them as friends to see them here!"})]})}},8742:function(e,n,t){"use strict";t.d(n,{P:function(){return o}});var s=t(2322),a=(t(2784),t(2367),t(1251)),i=t(7424),r=t(5598);function o(e){var n,t,o,l,c,d,u=e.data,h=e.showTimeTaken;return(0,s.jsxs)("div",{className:"leaderboard__user  leaderboard__user--".concat(u.rank),children:[(0,s.jsx)(a.qE,{small:!0,size:"40",url:u.playerProfile.avatar,username:u.playerProfile.username,isPro:u.playerProfile.isPro,userId:u.userId||u.playerProfile.id||u.playerProfile.uid,className:"leaderboard__user-avatar"}),(0,s.jsxs)("div",{className:"leaderboard__user-info",children:[(0,s.jsx)(a.Rj,{name:u.playerProfile.displayName,username:u.playerProfile.username,isPro:u.playerProfile.isPro,rank:u.rank,userId:u.userId||u.playerProfile.id||u.playerProfile.uid,className:"leaderboard__user-name",ellipsis:!0}),(0,s.jsxs)(r.HStack,{align:"center",children:[(0,s.jsxs)("p",{className:"leaderboard__user-score",children:[h?null:u.score?null===(n=u.score)||void 0===n?void 0:n.toFixed(2):"0"," ",h&&u.playedCount?"(".concat(u.playedCount," Target").concat(u.playedCount>1?"s":"",")"):""," ",h?u.timeTaken?"".concat(null===(t=u.timeTaken)||void 0===t?void 0:t.toFixed(2)," secs"):"-":null," ",!h&&u.playedCount?"(".concat(u.playedCount," Target").concat(u.playedCount>1?"s":"",")"):"",u.codeSize?"(".concat(u.codeSize," Chars)"):""]}),(0,s.jsx)(i.c,{tags:(null===(o=u.lastUpdated)||void 0===o?void 0:o.seconds)===(null===(l=u.nonCss)||void 0===l||null===(c=l.lastUpdated)||void 0===c?void 0:c.seconds)?null===(d=u.nonCss)||void 0===d?void 0:d.tags:[]})]})]})]})}},94:function(e,n,t){"use strict";t.d(n,{g:function(){return r}});var s=t(2322),a=t(4987),i=t(3290);function r(e){var n=e.isFriendsMode,t=e.onChange,r=e.fullWidth,o=void 0===r||r;return(0,s.jsx)(a.s,{options:[{label:"Everyone",value:"everyone"},{label:"Friends Only",value:"friends"}],onChange:function(e){t(e),(0,i.q)({name:"friendLeaderboardToggle",label:"friends"===e.target.value})},value:n?"friends":"everyone",fullWidth:o})}},8432:function(e,n,t){"use strict";var s=t(2322),a=t(8724),i=t(4030);n.Z=function(e){var n=e.alignMenuRight,t=e.isCSSLeaderboard,r=e.setIsCSSLeaderboard,o=e.levelId,l=e.battleId,c=e.small,d=void 0===c||c;return(0,i.isNonCssAvailable)({levelId:o,battleId:l})?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.L,{alignRight:n,dropdownBtnClasses:"".concat(d?"dropdown-btn--small":"","  dropdown-btn--leaderboard-switch ").concat(t?"":"dropdown-btn--primary"),dropdownMenuClasses:"dropdown-menu--no-padding dropdown-menu--small",dropdownBtnContent:t?"CSS":"ALL",children:(0,s.jsxs)("div",{style:{minWidth:"22rem"},children:[(0,s.jsxs)("div",{className:"dropdown-selector",onClick:function(){return r(!0)},children:[(0,s.jsx)("span",{className:"small-pill",style:{marginBottom:"0.5rem"},children:"CSS"}),(0,s.jsx)("p",{children:"Leaderboard only includes pure CSS solutions. Great for beginners"})]}),(0,s.jsxs)("div",{className:"dropdown-selector",onClick:function(){return r(!1)},children:[(0,s.jsx)("span",{className:"small-pill small-pill--primary",style:{marginBottom:"0.5rem"},children:"ALL"}),(0,s.jsx)("p",{children:"Leaderboard includes all solutions (SVG-in-CSS, Unicode, and CSS). Great for advanced players"})]})]})})}):null}},4200:function(e,n,t){"use strict";t.d(n,{T:function(){return o}});var s=t(2322),a=t(9604),i=t(5598),r=t(7841),o=function(e){var n=e.icon,t=e.value,o=e.valueDim,l=e.description,c=e.large,d=void 0!==c&&c;return(0,s.jsx)("div",{className:"leaderboard-stats-box ".concat(d?"leaderboard-stats-box--large":""),children:(0,s.jsxs)(i.VStack,{gap:0,children:[(0,s.jsx)("div",{className:"leaderboard-stats-box__icon",children:(0,s.jsx)(a.J,{name:n,color:"var(--clr-brand)",size:d?24:20,marginRight:"0"})}),(0,s.jsxs)(i.HStack,{gap:"0.5rem",children:[(0,s.jsx)(r.x,{mono:!1,size:d?3:2,weight:700,appearance:"primary",children:t}),o&&(0,s.jsx)(r.x,{mono:!1,size:d?3:2,weight:500,appearance:"secondary",children:o})]}),(0,s.jsx)(r.x,{mono:!1,size:d?1:0,weight:500,appearance:"tertiary",align:"center",children:l})]})})}},6368:function(e,n,t){"use strict";t.d(n,{A:function(){return o}});var s=t(8788),a=t(2970),i=t(2784),r=t(7037),o=function(e){var n=e.battleId,t=e.level,o=e.onBattleFetch,l=(0,i.useState)(),c=l[0],d=l[1];return(0,i.useEffect)((function(){if(n||t){var e=function(){var e=(0,s.Z)((function(){var e,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n?[4,(0,r.ch)(n)]:[3,2];case 1:return s=a.sent(),[3,4];case 2:return[4,(0,r.Ws)(t)];case 3:s=a.sent(),a.label=4;case 4:return d(e=s),o&&o(e),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}}),[n,t]),c}},9411:function(e,n,t){"use strict";t.d(n,{L:function(){return r}});var s=t(6383),a=t(4030),i=t(9318);function r(e){var n=e.levelId,t=e.battleId,r=(0,s.Z)((0,i._)("showCSSLeaderboard",!0),2),o=r[0],l=r[1];return(0,a.isNonCssAvailable)({levelId:n,battleId:t})?[o,l]:[!0,function(){}]}},6905:function(e,n,t){"use strict";t.d(n,{r:function(){return i}});var s=t(6383),a=t(9318);function i(){var e=(0,s.Z)((0,a._)("editor-settings",{fontSize:"0",bgm:"on",vim:!1}),2),n=e[0],t=e[1];return{editorSettings:n,editorSettingsChangeHandler:function(e){t(e)}}}},7733:function(e,n,t){"use strict";t.d(n,{h:function(){return l}});var s=t(865),a=t(6670),i=t(6297),r=t(2322),o=t(2548),l=function(e){var n=e.children,t=e.size,l=void 0===t?"3rem":t,c=e.animated,d=e.noShadow,u=e.border,h=(0,i.Z)(e,["children","size","animated","noShadow","border"]),m=c?o.E.h2:"h2";return(0,r.jsx)(m,(0,a.Z)((0,s.Z)({style:{textTransform:"uppercase",fontSize:l,fontWeight:"900",color:"var(--clr-brand)",textShadow:d?null:"-2px 2px #d001a2, 2px -2px #00ffcf",transform:h.animate?null:"rotate(0deg)",border:u?"5px solid var(--clr-brand)":null,borderRadius:u?"10px":null}},h),{children:n}))}},5370:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return De},default:function(){return Ae}});var s=t(8788),a=t(865),i=t(6670),r=t(2970),o=t(2322),l=t(5632),c=t(5237),d=t.n(c),u=t(7729),h=t.n(u),m=t(2784),p=t(8688),f=t.n(p),v=t(1453),g=t(6706),x=t(6383),y=t(8742),j=t(9241),b=t(3552),S=t(7037),w=t(9318),C=t(94),k=t(1942),_=t(9097),T=t.n(_),N=t(8432),I=t(9411),P=function(e){var n=e.levelId,t=(0,m.useContext)(b.S),s=(0,m.useState)([]),r=s[0],l=s[1],c=(0,m.useState)(),d=c[0],u=c[1],h=(0,x.Z)((0,w._)("showFriendsLeaderboard",!!t),2),p=h[0],f=h[1],g=(0,x.Z)((0,I.L)({levelId:n}),2),_=g[0],P=g[1];return(0,m.useEffect)((function(){window.localStorage.debug,u(!0),l([]),(p?(0,S.UZ)({levelId:n,userId:t.uid,isCSSLeaderboard:_}):(0,S.R6)({levelId:n,isCSSLeaderboard:_})).then((function(e){_||e.map((function(e){var n,t,s,a;e.score=null===(n=e.overall)||void 0===n?void 0:n.score,e.lastUpdated=null===(t=e.overall)||void 0===t?void 0:t.lastUpdated,e.codeSize=null===(s=e.overall)||void 0===s?void 0:s.codeSize,e.match=null===(a=e.overall)||void 0===a?void 0:a.match})),l(e),u(!1)}))}),[t?t.uid:"",n,p,_]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v.M,{extraContent:(0,o.jsx)(N.Z,{levelId:n,isCSSLeaderboard:_,setIsCSSLeaderboard:P}),meta:"",children:["Target #",n," Leaderboard"]}),(0,o.jsxs)("div",{className:"item__content",children:[t&&(0,o.jsx)("div",{style:{marginBottom:"1rem"},children:(0,o.jsx)(C.g,{isFriendsMode:p,onChange:function(e){f("friends"===e.target.value)}})}),p&&!d&&!r.length&&(0,o.jsx)(k.N,{}),(0,o.jsxs)("div",{className:"leaderboard-container",children:[d?(0,o.jsx)("p",{className:"ta-c",children:(0,o.jsx)(j.a,{})}):null,!d&&!r.length&&!p&&(0,o.jsx)("p",{className:"para",children:"No one here. It could be you! How about playing some targets?"}),(0,o.jsx)("ul",{className:"leaderboard__user-list leaderboard__user-list--local",children:r.map((function(e,n){return(0,o.jsx)("li",{children:(0,o.jsx)(y.P,{data:(0,i.Z)((0,a.Z)({},e),{rank:n+1})},n)},n)}))})]}),(0,o.jsx)("p",{className:"para ta-c",children:(0,o.jsx)(T(),{href:"/leaderboard/target/".concat(n),children:(0,o.jsx)("a",{className:"link",children:"See top 100"})})})]})]})},E=t(6763),L=t(2367),z=t(2220),O=t(1251);var R=t(5598),M=t(384),D=t(1893),A=t(6415),q=t(7333),H=t(2141),B=t(5885);function F(e){var n,t=e.submission,s=e.onClick,a=function(e){var n=[];return(e.match(/&[#0-9a-zA-Z]/gi)||function(e){for(var n=0,t=e.length;n<t;n++)if(e.charCodeAt(n)>255)return!0;return!1}(e))&&n.push({msg:"This submission uses unicode symbols to recreate the target. Unicode characters are rendered differently in different systems and might not work as you expect on your browser.",result:"warning",label:"Unicode"}),e.match(/--:/gi)&&n.push({msg:"This submission uses -- as variable names. This is no more supported since Chromium 99. Hence, this solution might not render properly in your browser or get a correct score.",label:"\ud83d\udfe0 Outdated",result:"warning"}),n}(t.code),i=(0,D.a)();return(0,o.jsxs)("div",{className:"top-submission-container",children:[(0,o.jsxs)("div",{className:"top-submission__author",children:[(0,o.jsx)(O.qE,{small:!0,size:"32",url:t.playerProfile.avatar,userId:t.playerProfile.userId,isPro:t.playerProfile.isPro,username:t.playerProfile.username,className:"target-highscore__avatar top-submission__author__avatar"}),(0,o.jsxs)(R.VStack,{gap:"0.4rem",align:"flex-start",children:[(0,o.jsx)(O.Rj,{name:t.playerProfile.displayName,username:t.playerProfile.username,userId:t.playerProfile.userId,ellipsis:!0}),(0,o.jsxs)("p",{className:"top-submission__author__score",children:["Score: ",t.score," ","{".concat(t.codeSize,"}"),","," ",t.match,"% match"]}),a.length?(0,o.jsx)("div",{children:a.map((function(e){var n=e.msg,t=e.label;return(0,o.jsx)(G,{label:t,msg:n})}))}):null]})]}),(0,o.jsx)("p",{className:"submissions-list__code",children:(0,o.jsx)(A.ZP,{value:t.code,readOnly:!0,theme:"light"===(null===i||void 0===i||null===(n=i.settings)||void 0===n?void 0:n.theme)?q.Ym:q.hZ,extensions:[(0,H.dy)(),B.tk.lineWrapping]})}),(0,o.jsx)(z.z,{primary:!0,extraClasses:"button--full-width",onClick:function(){return s(t.code)},children:"Load Code"})]})}var Z=function(e){var n=e.onSubmissionSelect,t=e.levelId,s=e.levelType,a=(0,m.useState)([]),i=a[0],r=a[1],l=(0,m.useState)(!1),c=l[0],d=l[1];return(0,m.useEffect)((function(){d(!0),r([]),("daily"===s?(0,S.AH)(t):(0,S.X2)(t)).then((function(e){(0,L.WQ)(e),r(e),d(!1)}))}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(v.M,{meta:"".concat(i.length," submissions"),children:"Top Submissions"}),(0,o.jsx)("div",{className:"item__content",children:(0,o.jsxs)("div",{className:"submissions-container",children:[c&&!i.length?(0,o.jsx)("p",{className:"ta-c",children:(0,o.jsx)(j.a,{})}):null,c||i.length?null:(0,o.jsx)("p",{className:"section-helper",children:"No submissions yet."}),!c&&i.length?(0,o.jsx)("p",{children:"You are seeing only unique solutions in top 10"}):null,c||i.length?null:(0,o.jsx)("p",{className:"section-helper",children:"No matching submission found."}),(0,o.jsx)("ul",{className:"submissions-list",children:i.map((function(e){return(0,o.jsx)("li",{className:"submissions-list__item",children:(0,o.jsx)(F,{submission:e,onClick:n})},e.id)}))})]})})]})};function G(e){var n=e.label,t=e.msg,s=(0,m.useState)(!1),a=s[0],i=s[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{style:{display:"inline-block",padding:"0.2rem 0.5rem",borderRadius:"3rem",background:"rgb(255 244 0 / 17%)",border:0,color:"inherit"},onClick:function(){return i(!a)},children:n}),(0,o.jsx)(M.u,{size:"small",isOpen:a,onRequestClose:function(){return i(!1)},children:t})]})}var V=t(4702),U=t(7892),W=t(3290),Y=t(9604);function J(e){var n,t=(0,m.useState)(e.type),s=t[0],a=(t[1],(0,D.a)()),i=(null===a||void 0===a||null===(n=a.settings)||void 0===n?void 0:n.theme)||"dark";return(0,m.useEffect)((function(){var e=document.createElement("script");e.async=!0,"ethicalads"===s?(e.src="https://media.ethicalads.io/media/client/ethicalads.min.js",e.onload=function(){window.ethicalads&&window.ethicalads.wait.then((function(e){e.length?console.debug("EthicalAds are loaded"):console.debug("Loading backup content")}))}):(e.id="_carbonads_js",e.src="https://cdn.carbonads.com/carbon.js?serve=CK7I6KJN&placement=cssbattledev");var n=document.querySelector(".no-sponsor");document.querySelector(".sponsor-containerr").insertBefore(e,n)}),[s]),(0,o.jsxs)("div",{className:"sponsor-containerr",children:["ethicalads"===s&&(0,o.jsx)("div",{"data-ea-publisher":"cssbattle-dev",className:"horizontal flat ".concat(i),"data-ea-type":"image"}),(0,o.jsxs)("div",{className:"no-sponsor",children:[(0,o.jsx)("a",{href:"https://webmaker.app/?utm_source=cssbattle-inner",target:"_blank",rel:"noopener",children:(0,o.jsx)("img",{src:"/images/webmaker-banner.png",className:"bytes-target-sponsor-img"})}),!1]})]})}var K=t(7841),X=t(5416),Q=function(e){var n=e.isOpen,t=e.onRequestClose,s=e.score,a=function(e){var n=e.text;return(0,o.jsx)(X.s,{onlyBorder:!0,fullWidth:!0,padding:"0.5rem",children:(0,o.jsx)(K.x,{mono:!1,weight:"500",size:"1",appearance:"primary",children:n})})};return(0,o.jsxs)(M.u,{isOpen:n,size:"small",extraClasses:"modal--text-center",children:[(0,o.jsx)("div",{className:"firstScoreIcon"}),(0,o.jsxs)(K.x,{weight:"600",tag:"h2",mono:!1,size:"3-5",appearance:"primary",align:"center",children:["You scored ",s,"!"]}),(0,o.jsx)(R.VStack,{children:(0,o.jsxs)("p",{className:"para",style:{lineHeight:"1.6",width:"100%"},children:[(0,o.jsx)(K.x,{mono:!1,weight:"500",size:"1",children:"Sign in to CSSBattle and get the following awesome benefits"}),(0,o.jsx)("div",{style:{marginTop:"2rem"},children:(0,o.jsxs)(R.VStack,{gap:"0.5",align:"stretch",children:[(0,o.jsxs)(R.HStack,{gap:"0.5",children:[(0,o.jsx)(a,{text:"Access your submissions history"}),(0,o.jsx)(a,{text:"Get a personalized profile"})]}),(0,o.jsxs)(R.HStack,{gap:"0.5",children:[(0,o.jsx)(a,{text:"Maintain your streak"}),(0,o.jsx)(a,{text:"See your name in the leaderboards"})]})]})})]})}),(0,o.jsxs)(O.hE,{center:!0,children:[(0,o.jsx)(z.z,{onClick:t,children:"Cancel"}),(0,o.jsx)(T(),{href:"/login",children:(0,o.jsx)("a",{className:"button button--primary",onClick:function(){(0,W.q)({name:"scoreModalSignupClick"})},children:"Sign Up / Sign In"})})]})]})},$=t(766),ee=t(2142);function ne(e){var n=e.levelId,t=(0,m.useState)(),s=t[0],a=t[1];return(0,m.useEffect)((function(){var e=ee.n.find((function(e){return e.levelIds.includes(n)}));a(e)}),[n]),s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"inner-header",children:(0,o.jsx)("h4",{className:"header__title header__title--inner",children:"Target Sponsored By"})}),(0,o.jsxs)("div",{className:"island",children:[(0,o.jsx)("div",{children:(0,o.jsx)("img",{className:"sponsor-image",width:"100",src:s.img,alt:""})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("a",{className:"spponsor-link",target:"_blank",rel:"external noopener noreferrer",href:(0,L.nX)(s.link,s.id),children:[s.name," ",(0,o.jsx)(Y.J,{name:"link",size:"12"})]}),(0,o.jsx)("p",{className:"sponsor-desc",children:s.tagLine})]})]})]}):null}var te=t(8387),se=function(e){var n=e.isOpen,t=e.onViewSolutionsRequest,s=e.onRequestClose;return(0,o.jsxs)(M.u,{isOpen:n,size:"small",extraClasses:"modal--text-center",children:[(0,o.jsx)("div",{className:"openBookIcon"}),(0,o.jsx)("h2",{children:'This is an "Open" Target'}),(0,o.jsxs)("p",{className:"para",style:{lineHeight:"1.6"},children:["Open Targets have all the top solutions public. Learn new tips & tricks and apply them to other targets."," ",(0,o.jsx)("a",{className:"link",href:"/blog/introducing-open-targets/",target:"_blank",children:"Learn More about Open Targets"}),"."]}),(0,o.jsxs)(O.hE,{center:!0,children:[(0,o.jsx)(z.z,{onClick:t,primary:!0,children:"View Top Solutions"}),(0,o.jsx)(z.z,{onClick:s,children:"Close"})]})]})},ae=t(9288),ie=t(930),re=t(2548),oe=t(7733),le={duration:1,delay:0,times:[0,.8,1],repeat:0},ce=function(e){var n=e.count,t=void 0===n?3:n,s=e.shouldAutoStart,r=e.onRequestClose,l=(0,m.useState)(s),c=l[0],d=l[1];return(0,o.jsxs)(re.E.div,{className:"countdown-wrap",children:[!c&&(0,o.jsxs)(R.VStack,{gap:"2rem",children:[(0,o.jsx)(oe.h,{size:"13rem",children:"Play & Win!"}),(0,o.jsx)("p",{style:{fontSize:"2rem"},children:"Replicate the given image as close as possible in 3 minutes. Feel the rush!"}),(0,o.jsx)(z.z,{cool:!0,size:"xl",onClick:function(){return d(!0)},children:"Start Game!"})]}),c&&(0,o.jsxs)(o.Fragment,{children:[(0,ie.Z)(Array(t)).map((function(e,n){return(0,o.jsx)(de,{delay:n,onStart:function(){t-n<4&&(0,L.GC)({1:"one",2:"two",3:"three"}[t-n],n)},children:t-n},n)})),(0,o.jsx)(re.E.div,{className:"countdown__digit",onAnimationStart:function(){return(0,L.GC)("play",t)},transition:(0,i.Z)((0,a.Z)({},le),{delay:t}),animate:{opacity:[0,1,0],scale:[0,1,.5]},onAnimationComplete:r,children:"GO!"})]})]})},de=function(e){var n=e.delay,t=e.onStart,s=e.children;return(0,o.jsx)(re.E.div,{className:"countdown__digit",transition:(0,i.Z)((0,a.Z)({},le),{delay:n}),onAnimationStart:t,animate:{opacity:[0,1,0],y:[100,0,-50]},children:s})},ue=t(1551),he=function(e){var n=e.minutes,t=e.onFinish,s=e.startDate,a=e.showHeading,i=void 0===a||a,r=(0,m.useState)(),l=r[0],c=r[1];return(0,m.useEffect)((function(){if(s){var e=new Date(1e3*s.seconds+60*n*1e3);c(e)}else{var t=new Date(1e3*(Date.now()/1e3+60*n));c(t)}}),[n]),(0,o.jsxs)(o.Fragment,{children:[i?(0,o.jsx)("div",{className:"inner-header",children:(0,o.jsx)("h4",{className:"header__title header__title--inner",children:"Time left"})}):null,(0,o.jsx)("div",{className:"score-container",children:(0,o.jsxs)("div",{children:[" ",(0,o.jsx)(ue.W,{date:l,onFinish:t,showEmoji:!1,suffix:""})]})})]})},me=["in-motion.mp3","ghost-n-stuff.mp3","mortal-kombat.mp3"];var pe=t(9375),fe=t(6368),ve=t(7500),ge=function(e){var n=e.isOpen,t=e.onRequestClose,s=(0,l.useRouter)();return(0,o.jsxs)(M.u,{isOpen:n,size:"small",extraClasses:"modal--text-center",children:[(0,o.jsx)("h2",{children:"Past Daily Target"}),(0,o.jsxs)("p",{className:"para",style:{lineHeight:"1.6",marginBottom:"3rem"},children:["Past Daily targets are only accessible to ",(0,o.jsx)(te.Z,{})," players."]}),(0,o.jsxs)(R.VStack,{align:"center",children:[(0,o.jsx)(T(),{href:"/",children:(0,o.jsx)("a",{className:"button ",onClick:function(){(0,W.q)({name:"dailyTargetInaccessibleModalVisitDailyPage"}),s.push("/daily")},children:"Play today's Daily Target"})}),(0,o.jsx)(T(),{href:"/plus",children:(0,o.jsxs)("a",{className:"button button--primary",onClick:function(){(0,W.q)({name:"dailyTargetInaccessibleModalVisitProPage"}),s.push("/plus")},children:["Become a ",(0,o.jsx)(te.Z,{style:{marginRight:"0.5rem"}})," player"]})}),(0,o.jsx)(z.z,{onClick:t,children:"Close"})]})]})},xe=t(4030),ye=function(e){var n=e.isOpen,t=(e.onViewSolutionsRequest,e.onRequestClose);return(0,o.jsx)(M.u,{isOpen:n,size:"small",extraClasses:"modal--text-center",children:(0,o.jsx)("div",{style:{textAlign:"left"},children:(0,o.jsxs)(R.VStack,{children:[(0,o.jsx)(Y.J,{name:"daily-targets",size:"3rem",color:"var(--clr-brand)"}),(0,o.jsx)("h2",{style:{letterSpacing:"0.3px",fontSize:"2rem"},children:'Welcome to your first "Daily Target"'}),(0,o.jsx)("p",{className:"para",style:{margin:"0 0 2rem 0",lineHeight:"1.6"},children:"Daily Targets are special targets, with one new unlocking every day at 00:00 UTC."}),(0,o.jsxs)("ol",{className:"pricing-list",style:{paddingLeft:"0",textAlign:"left",lineHeight:"1.6"},children:[(0,o.jsx)("li",{children:"By default, you can play today's target. If you have a PLUS membership, you can also play all the past daily targets."}),(0,o.jsx)("li",{children:"Leaderboards are out; it's all about fun-filled practice!"}),(0,o.jsx)("li",{children:"Past Daily Targets become open targets i.e. their top 10 solutions become public - for you to learn from!"}),(0,o.jsx)("li",{children:"You cannot improve your highscore on a Past Daily Target. If you are a PLUS user, you can still play and get a score on any past daily target."})]}),(0,o.jsx)(O.hE,{center:!0,children:(0,o.jsx)(z.z,{primary:!0,onClick:t,children:"Got it! Let's go!"})})]})})})},je=function(e){var n=e.isOpen,t=e.isTodaysTarget,s=e.onRequestClose,a=(0,l.useRouter)();return(0,o.jsxs)(M.u,{isOpen:n,size:"small",extraClasses:"modal--text-center",children:[(0,o.jsx)("h2",{children:"Solutions are locked!"}),t?(0,o.jsx)("p",{className:"para",style:{lineHeight:"1.6",marginBottom:"3rem"},children:"Daily targets become open-targets the next day. Come back tomorrow to see the top solutions."}):(0,o.jsx)("p",{className:"para",style:{lineHeight:"1.6",marginBottom:"3rem"},children:'Only "PLUS" players can see the top solutions for Daily targets past yesterday. You can see yesterday\'s top solutions or become a "PLUS" player.'}),(0,o.jsxs)(R.VStack,{align:"center",children:[(0,o.jsx)(z.z,{onClick:s,children:"Okay!"}),t?null:(0,o.jsx)(T(),{href:"/plus",children:(0,o.jsxs)("a",{className:"button button--primary",onClick:function(){(0,W.q)({name:"dailyTargetSolutionInaccessibleModalVisitProPage"}),a.push("/plus")},children:["Become a ",(0,o.jsx)(te.Z,{style:{marginRight:"0.5rem"}})," player"]})})]})]})},be=t(4200),Se=t(4987),we=t(723),Ce=t(8724),ke=(0,m.memo)((function(e){var n,t,s=e.result,a=e.myLevelHighScore,i=e.level,r=e.levelStats,l=e.battle,c=e.onLevelLeaderboardClick,d=(0,m.useState)("personal"),u=d[0],h=d[1],p=(0,m.useContext)(b.k).streak,f=(0,m.useState)(""),v=f[0],g=f[1];return(0,m.useEffect)((function(){a&&i&&g((0,L.qA)({score:a.score,codeSize:a.codeSize,levelId:i.id,levelName:i.name,isDaily:"daily"===i.type,streak:null===p||void 0===p?void 0:p.count,date:i.formattedDate}))}),[a,i]),(0,o.jsxs)(o.Fragment,{children:["daily"===(null===i||void 0===i?void 0:i.type)?(0,o.jsx)("div",{style:{marginTop:"2rem"},children:(0,o.jsx)(Se.s,{fullWidth:!0,options:[{label:"Your stats",value:"personal"},{label:"Global stats",value:"global"}],value:u,onChange:function(e){h(e.target.value)}})}):(0,o.jsx)("div",{className:"inner-header",children:(0,o.jsx)("h4",{className:"header__title header__title--inner",children:"Your stats"})}),"personal"===u&&(0,o.jsx)(re.E.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},children:(0,o.jsx)("div",{className:"score-container",children:(0,o.jsxs)(R.VStack,{align:"stretch",children:[(0,o.jsxs)(R.HStack,{gap:"0.5rem",wrap:!0,children:[(0,o.jsx)(be.T,{icon:"star",value:s.score?"".concat(s.score):"-",valueDim:s.match?"(".concat(s.match,"% match)"):"",description:"Last score"}),(0,o.jsx)(be.T,{icon:"bolt",value:(null===a||void 0===a?void 0:a.score)||"-",valueDim:(null===a||void 0===a?void 0:a.score)&&(null===l||void 0===l?void 0:l.gameMode)!==ve.BattleGameModes.FIRST_TO_MATCH?"{".concat(a.codeSize,"}"):null,description:"High score ".concat((null===a||void 0===a||null===(n=a.nonCss)||void 0===n?void 0:n.score)?"(CSS)":"")}),(null===a||void 0===a||null===(t=a.nonCss)||void 0===t?void 0:t.score)&&(0,o.jsx)(be.T,{icon:"bolt",value:"".concat(a.overall.score),valueDim:"{".concat(a.overall.codeSize,"}"),description:"High score (ALL)"})]}),(0,o.jsxs)(R.HStack,{gap:"0.5rem",children:[l&&(null===l||void 0===l?void 0:l.gameMode)!==ve.BattleGameModes.FIRST_TO_MATCH?(0,o.jsxs)(z.z,{extraClasses:"button--full-width",onClick:c,children:[(0,o.jsx)(Y.J,{name:"leaderboard",size:"1.2em"}),"Leaderboard"]}):" ",a?(0,o.jsx)(_e,{level:i,challengeText:v}):null]})]})})}),"global"===u&&(0,o.jsx)(re.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:(0,o.jsx)("div",{className:"score-container",children:(0,o.jsx)(R.VStack,{align:"stretch",children:(0,o.jsxs)(R.VStack,{gap:"0.5rem",align:"stretch",children:[(0,o.jsxs)(R.HStack,{gap:"0.5rem",children:[(0,o.jsx)(we.DailyTargetsStatsTile,{icon:"user",name:"Players",value:(null===r||void 0===r?void 0:r.playedCount)||"-"}),(0,o.jsx)(we.DailyTargetsStatsTile,{icon:"stats",name:"Success rate",value:(null===r||void 0===r?void 0:r.successRate)?"".concat(null===r||void 0===r?void 0:r.successRate,"%"):"-"})]}),(0,o.jsxs)(R.HStack,{gap:"0.5rem",children:[(0,o.jsx)(we.DailyTargetsStatsTile,{icon:"star",name:"Avg. score",value:(null===r||void 0===r?void 0:r.averageScore)||"-"}),(0,o.jsx)(we.DailyTargetsStatsTile,{icon:"characters",name:"Avg. chars",value:(null===r||void 0===r?void 0:r.averageCodeSize)||"-"})]}),(0,o.jsx)(we.DailyTargetsStatsTile,{icon:"tags",name:"Most used properties",value:(null===r||void 0===r?void 0:r.properties.join(", "))||"-"})]})})})})]})})),_e=function(e){var n=e.level,t=void 0===n?{}:n,s=e.challengeText,a=void 0===s?"sdsd":s,i=(0,m.useState)(!1);i[0],i[1];return(0,o.jsx)(Ce.L,{fullWidth:!0,dropdownBtnContent:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Y.J,{name:"share",size:"1.2em"}),"Challenge"]}),dropdownContainerClasses:"width--full",dropdownBtnClasses:"width--full",children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem"},children:[(0,o.jsx)("a",{href:"https://twitter.com/share?url=https://cssbattle.dev/play/".concat(t.id,"&text=").concat(a).concat("daily"===t.type?"":"&hashtags=CSSBattleChallenge","&via=css_battle&related=css_battle"),target:"_blank",rel:"external noopener noreferrer",className:"button button--full-width",children:(0,o.jsx)(Y.J,{name:"twitter",size:"1.2em",marginRight:"0"})}),(0,o.jsx)("a",{href:"https://bsky.app/intent/compose?text=".concat(a,"%20https://cssbattle.dev/play/").concat(t.id,"%20%23CSSBattleChallenge%20via%20%40cssbattle.dev"),target:"_blank",rel:"external noopener noreferrer",className:"button button--full-width",children:(0,o.jsx)(Y.J,{name:"bluesky",size:"1.2em",marginRight:"0"})})]})})},Te=t(6746),Ne=t(4468),Ie=t(3738);Ne.kL.defaults.font.size=14,Ne.kL.defaults.font.family="ClashGrotesk";var Pe=d()((function(){return t.e(5823).then(t.bind(t,5823)).then((function(e){return e.StarredScripts}))}),{loadableGenerated:{webpack:function(){return[5823]}},ssr:!1,loading:function(){return(0,o.jsx)(O.e9,{})}});Ne.kL.register(Ne.wL,Ne.uw,Ne.f$,Ne.Dx,Ne.u,Ne.De,Ne.od,Ne.jn);var Ee={elements:{point:{radius:5}},scales:{x:{display:!1},y:{display:!0,border:{dash:[6,6]},ticks:{font:{family:"IBM Plex Mono"}},grid:{color:function(e){return 600===e.tick.value?"rgb(30 129 30 / 30%)":"rgb(255 255 255 / 9%)"},lineWidth:function(e){return 600===e.tick.value?3:1}}}},responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:"Last 100 scores"}}},Le=(0,m.memo)((function(e){var n=e.scripts,t=e.levelId,s=e.onScriptSelect,a=function(){"graphs"===l&&(0,S.XU)({userId:d.uid,levelId:t,count:100}).then((function(e){e.reverse();var n=e.map((function(e){var n=new Date(e.timestamp);return"".concat(n.getDate()," ").concat(n.toLocaleString("default",{month:"short"}))})),t=e.map((function(e){return e.score}));p({labels:n,datasets:[{label:"Score",data:t,backgroundColor:function(n){return e.map((function(e){return e.score>600?"rgb(0 255 0 / 40%)":"rgb(255 0 0 / 40%)"}))},elements:{line:{borderColor:"light"===i?"rgb(151 110 6 / 40%)":"rgb(255 223 0/ 50%)"}}}]})}))},i=(0,m.useContext)(b.k).theme,r=(0,m.useState)("plugins"),l=r[0],c=r[1],d=(0,D.a)(),u=(0,m.useState)(),h=u[0],p=u[1];return(0,m.useEffect)((function(){a()}),[l,t]),(0,m.useEffect)((function(){return window.addEventListener("newScoreRecieved",a),function(){window.removeEventListener("newScoreRecieved",a)}}),[a]),(0,o.jsxs)(R.VStack,{align:"stretch",gap:"1rem",children:[(0,o.jsx)(Se.s,{fullWidth:!0,options:[{label:"Favorite Plugins",value:"plugins"},{label:"Score Trend",value:"graphs"}],value:l,onChange:function(e){c(e.target.value)},classes:"js-toolbox-radiotabs"}),"graphs"===l&&h&&(0,o.jsx)(Ie.x1,{options:Ee,data:h}),"plugins"===l&&(0,o.jsx)(m.Suspense,{fallback:(0,o.jsx)(O.e9,{}),children:(0,o.jsx)(Pe,{onScriptSelect:s,scripts:n})})]})})),ze=t(5791),Oe=t(6905),Re=d()((function(){return t.e(9101).then(t.bind(t,9101)).then((function(e){return e.UserScripts}))}),{loadableGenerated:{webpack:function(){return[9101]}},ssr:!1,loading:function(){return(0,o.jsx)(O.e9,{})}}),Me=(0,m.memo)((function(e){var n=e.isSliderOn,t=e.slideToggleHandler,s=e.isDiffOn,a=e.diffToggleHandler;return(0,o.jsxs)(R.HStack,{justify:"flex-end",children:[(0,o.jsxs)("label",{style:{display:"flex",gap:"0.25rem",alignItems:"center"},children:[(0,o.jsx)("input",{defaultValue:!0,checked:n,type:"checkbox",onChange:t})," ","Slide & Compare"]}),(0,o.jsxs)("label",{style:{display:"flex",gap:"0.25rem",alignItems:"center"},children:[(0,o.jsx)("input",{defaultValue:!0,checked:s,type:"checkbox",onChange:a})," ","Diff"]})]})})),De=!0,Ae=function(e){var n=e.levelIdParam,c=e.level,u=function(){(null===N||void 0===N?void 0:N.gameMode)||window.localStorage.setItem("lastCode-".concat(H),Ae.current)},p=function(e){"Escape"===e.key&&(Ge(!1),$e(!1)),e.key===Nn.current.editor&&e.ctrlKey&&e.shiftKey?window.dispatchEvent(new Event("customEditorFocus")):e.key===Nn.current.plugins&&e.ctrlKey&&e.shiftKey&&w("openEditorPluginsKbdShortcut"),e.key===Nn.current.colorPicker&&e.ctrlKey&&e.shiftKey&&(k(),e.preventDefault()),e.key===Nn.current.toolbox&&e.ctrlKey&&e.shiftKey&&(_(),e.preventDefault()),e.key===Nn.current.diff&&e.ctrlKey&&e.shiftKey&&wn((function(e){return!e}))},x=function(){En(!1),window.localStorage.setItem("hasSeenOpenTargetModal",!0)},y=function(e){De(e),Ae.current=e,j(e)},j=function(e){var n=(0,$.j)({code:e,levelId:H});vn(n)},w=function(e){tn((function(e){return!e})),Ge(!1),$e(!1),(0,W.q)({name:e})},C=function(e){y(e),Ge(!1),U.Am.info("Previous submission code loaded.")},k=function(){window.document.querySelector(".js-target-color").focus()},_=function(){window.document.querySelector(".js-toolbox-radiotabs").focus()},T=(0,l.useRouter)(),N=(0,D.a)(),I=(0,m.useState)(!1),M=I[0],A=I[1];(0,m.useEffect)((function(){A(!0)}),[]);var q=n.length>6,H=q?n:parseInt(n,10),B=(0,m.useState)(c),F=B[0],G=B[1],X=(0,m.useState)(!0),ie=X[0],re=X[1],oe=(0,m.useState)(!1),le=oe[0],de=oe[1],ue=(0,m.useState)(!1),be=ue[0],Se=ue[1];(0,m.useEffect)((function(){var e=f().find((function(e){return e.id===H}));e?G(e):(0,S.Qz)(H).then((function(e){G(e),"daily"!==e.type||(null===N||void 0===N?void 0:N.isPro)||(0,xe.isTodaysDailyTarget)(e)||re(!1)})),(null===N||void 0===N?void 0:N.uid)&&Ze&&(Ke(!0),qn().then((function(e){Ke(!1),Be(e)})))}),[H]);var we=(0,m.useContext)(b.k),Ce=we.setBattle,_e=we.setBattle,Ne=we.setLevel,Ie=(0,fe.A)({level:F,onBattleFetch:Ce});(0,m.useEffect)((function(){return Ne(F),function(){Ne(null),_e(null)}}),[F]);var Pe=(0,m.useState)("<div></div>\n<style>\n  div {\n    width: 100px;\n    height: 100px;\n    background: #dd6b4d;\n  }\n</style>\n"+((null===N||void 0===N?void 0:N.gameMode)?"":"\n\x3c!-- OBJECTIVE --\x3e\n\x3c!-- Write HTML/CSS in this editor and replicate the given target image in the least code possible. What you write here, renders as it is --\x3e\n\n\x3c!-- SCORING --\x3e\n\x3c!-- The score is calculated based on the number of characters you use (this comment included :P) and how close you replicate the image. Read the FAQS (https://cssbattle.dev/faqs) for more info. --\x3e\n\n\x3c!-- IMPORTANT: remove the comments before submitting --\x3e")),Ee=Pe[0],De=Pe[1],Ae=(0,m.useRef)(Ee),qe=(0,m.useState)(),He=qe[0],Be=qe[1],Fe=(0,m.useState)(!1),Ze=Fe[0],Ge=Fe[1],Ve=(0,m.useState)(!1),Ue=Ve[0],We=Ve[1],Ye=(0,m.useState)(),Je=Ye[0],Ke=Ye[1],Xe=(0,m.useState)(!1),Qe=Xe[0],$e=Xe[1],en=(0,m.useState)(!1),nn=en[0],tn=en[1],sn=(0,m.useState)({}),an=sn[0],rn=sn[1],on=(0,m.useState)(),ln=on[0],cn=on[1],dn=(0,m.useState)(!1),un=dn[0],hn=dn[1],mn=ee.n.find((function(e){return e.levelIds.includes(H)})),pn=(0,m.useState)({msg:"No errors found",isCodeInvalid:!1}),fn=pn[0],vn=pn[1],gn=(0,m.useState)(!0),xn=gn[0],yn=gn[1],jn=(0,m.useCallback)((function(e){yn(e.target.checked)}),[]),bn=(0,m.useState)(!1),Sn=bn[0],wn=bn[1],Cn=(0,m.useCallback)((function(e){wn(e.target.checked)}),[]),kn=(0,m.useState)(!1),_n=kn[0],Tn=kn[1],Nn=(0,m.useRef)({colorPicker:"C",editor:"E",diff:"D",plugins:"P",toolbox:"T"});(0,m.useEffect)((function(){window.localStorage.getItem("hotkeys")&&(Nn.current=JSON.parse(window.localStorage.getItem("hotkeys")))}),[]),(0,m.useEffect)((function(){F&&(window.document.title="Target #".concat(H," ").concat(F.name?"(".concat(F.name,")"):""," - CSSBattle"))}),[F]),(0,m.useEffect)((function(){return document.body.classList.add("level-page"),function(){document.body.classList.remove("level-page")}}),[]),(0,m.useEffect)((function(){return window.addEventListener("keyup",p),function(){window.removeEventListener("keyup",p)}}),[]),(0,m.useEffect)((function(){var e="lastCode-".concat(H),n=window.localStorage.getItem(e);n&&(window.localStorage.removeItem(e),(null===N||void 0===N?void 0:N.gameMode)||y(n)),window.addEventListener("unload",u);var t=window.location.pathname;return function(){window.removeEventListener("unload",u),window.localStorage.setItem(e,Ae.current),T.pathname.match(/login/)&&window.localStorage.setItem("beforeLoginLocation",t)}}),[H]);var In=(0,m.useState)(!1),Pn=In[0],En=In[1];(0,m.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("hasSeenOpenTargetModal"));F&&!F.isOpen||e?En(!1):F&&F.isOpen&&!e&&En(!0)}),[F]);var Ln=(0,m.useState)(!1),zn=Ln[0],On=Ln[1];(0,m.useEffect)((function(){if(F){var e=JSON.parse(window.localStorage.getItem("hasSeenDailyTargetModal"));"daily"!==F.type||e?On(!1):"daily"!==F.type||e||On(!0)}}),[F]);var Rn=function(){var e=(0,m.useState)([]),n=e[0],t=e[1],s=(0,D.a)();return(0,m.useEffect)((function(){s&&s.isPro&&(0,S.Z6)({userId:s.uid}).then((function(e){t(e)}))}),[s?s.isPro:""]),{editorPlugins:n,runAutorunPluginsOnCode:function(e){var t=e;return s&&s.isPro&&n.some((function(e){return e.shouldAutoRun}))&&(U.Am.info("Running your auto-run editor plugins..."),n.forEach((function(e){e.shouldAutoRun&&(t=(0,L.TF)(e,t))}))),t},editorPluginUpdateHandler:function(e){t(e)}}}(),Mn=Rn.editorPlugins,Dn=Rn.runAutorunPluginsOnCode,An=Rn.editorPluginUpdateHandler;function qn(){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,s.Z)((function(){return(0,r.__generator)(this,(function(e){return[2,(0,S.XU)({userId:N.uid,levelId:H,count:(null===N||void 0===N?void 0:N.isPro)?void 0:5})]}))}))).apply(this,arguments)}(0,m.useEffect)((function(){N&&(0,S.A9)({playerId:N.uid,levelId:H}).then(cn)}),[H,N]);var Bn=(0,m.useCallback)((function(){$e(!0),Ge(!1),(0,W.q)({name:"levelLeaderboardBtnClick"})}),[]);function Fn(){return(Fn=(0,s.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return Ge(!0),$e(!1),Ke(!0),[4,qn()];case 1:return e=n.sent(),Ke(!1),Be(e),(0,W.q)({name:"levelSubmissionsBtnClick",label:e.length}),[2]}}))}))).apply(this,arguments)}function Zn(){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,s.Z)((function(){return(0,r.__generator)(this,(function(e){return ot&&!lt?(Se(!0),[2]):(We(!0),$e(!1),(0,W.q)({name:"topSubmissionsBtnClick"}),[2])}))}))).apply(this,arguments)}var Vn=(0,m.useCallback)((function(e){var n=(0,L.TF)(e,Ae.current);y(n),U.Am.info('Plugin "'.concat(e.title,'" applied.'))}),[]);function Un(){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,s.Z)((function(){var e,n,t,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return ie||"daily"!==(null===F||void 0===F?void 0:F.type)?un||fn.isCodeInvalid?[2]:((0,W.q)({name:"submitBtnClick"}),e=Dn(e=Ee),y(e),N?[4,N.firebaseUser.getIdToken()]:[3,2]):(de(!0),[2]);case 1:return t=r.sent(),[3,3];case 2:t="",r.label=3;case 3:return n=t,hn(!0),s=(0,L.uY)(),fetch("".concat(S.bl,"/getScore?levelId=").concat(H,"&token=").concat(n),{method:"post",headers:{"Content-Type":"Application/json"},body:JSON.stringify({code:e,timeZone:s})}).then((function(e){return e.json()})).then((function(n){var t;if(hn(!1),rn(n),window.dispatchEvent(new Event("newScoreRecieved")),0!==n.score){var s=null===(t=n.validationTags)||void 0===t?void 0:t.includes("css"),r=(0,L.tF)(ln,(0,i.Z)((0,a.Z)({},n),{codeSize:e.length})),l=r.newObj,c=r.isAHighScore;cn(l),c?((0,L.lC)(4),N?U.Am.success((0,o.jsxs)(o.Fragment,{children:["New highscore!! You scored"," ",(0,o.jsx)(K.x,{weight:"600",appearance:"success",children:n.score})," ","with"," ",(0,o.jsxs)(K.x,{weight:"600",appearance:"success",children:[n.match,"%"]})," ","match"," ",s?"":". See you in the secondary leaderboard!"]})):Tn(!0)):U.Am.info((0,o.jsxs)(o.Fragment,{children:["You scored"," ",(0,o.jsx)(K.x,{weight:"600",appearance:"success",children:n.score})," ","with"," ",(0,o.jsxs)(K.x,{weight:"600",appearance:"success",children:[n.match,"%"]})," ","match ",s?"":". See you in the secondary leaderboard!"]}))}else(null===Ie||void 0===Ie?void 0:Ie.gameMode)===ve.BattleGameModes.FIRST_TO_MATCH&&U.Am.info("You scored 0 with ".concat(n.match,'% match. Get 100% match to score in a "Time attack" battle.'))})).catch((function(e){hn(!1),U.Am.error("Something went wrong. Please submit again.")})),[2]}}))})),Wn.apply(this,arguments)}(0,m.useEffect)((function(){var e=function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),Un())};return window.addEventListener("keydown",e,!0),function(){return window.removeEventListener("keydown",e,!0)}}),[Un]);var Yn=(0,ae.I)(),Jn=(0,m.useRef)(null);(0,m.useEffect)((function(){var e;N&&N.isPro&&(null===(e=N.settings)||void 0===e?void 0:e.vscode)?Jn.current=d()((function(){return Promise.all([t.e(1037),t.e(9534),t.e(1541)]).then(t.bind(t,7732))}),{loadableGenerated:{webpack:function(){return[7732]}},ssr:!1,loading:function(){return(0,o.jsx)(O.e9,{})}}):Jn.current=d()((function(){return Promise.all([t.e(7659),t.e(8522)]).then(t.bind(t,8522))}),{loadableGenerated:{webpack:function(){return[8522]}},ssr:!1,loading:function(){return(0,o.jsx)(O.e9,{})}})}),[null===N||void 0===N?void 0:N.isPro]);var Kn=Jn.current,Xn=function(){var e=(0,D.a)(),n=(0,m.useState)(!1),t=n[0],s=n[1],a=(0,m.useState)(!1),i=a[0],r=a[1];(0,m.useEffect)((function(){(null===e||void 0===e?void 0:e.gameMode)&&r(!0)}),[null===e||void 0===e?void 0:e.gameMode]);var o=(0,m.useState)(!1),l=o[0],c=o[1],d=(0,m.useRef)();function u(){var e=me[~~(Math.random()*me.length)],n=d.current=new Audio("https://kushagra.dev/uploads/".concat(e));n.onended=u,d.current&&(d.current.volume=.2),n.play()}return(0,m.useEffect)((function(){window.addEventListener("click",(function n(){window.removeEventListener("click",n),(null===e||void 0===e?void 0:e.gameMode)&&u()}))}),[]),{hasGameStarted:t,isTimeOver:l,shouldShowCountdown:i,startGame:function(){r(!1),s(!0),d.current&&(d.current.volume=1)},stopGame:function(){c(!0),new Audio("/sfx/game-over.mp3").play(),d.current&&(d.current.volume=.4)}}}(),Qn=Xn.hasGameStarted,$n=Xn.isTimeOver,et=Xn.shouldShowCountdown,nt=Xn.startGame,tt=Xn.stopGame,st=H.length?"":"#".concat(H),at=(0,m.useState)(),it=at[0],rt=at[1];(0,m.useEffect)((function(){"daily"===(null===F||void 0===F?void 0:F.type)&&(F.formattedDate=(0,L.dQ)(F.startDate),(0,S.D2)(F.id).then((function(e){e&&(e.properties=e.properties.filter((function(e){return!["width","height","background"].includes(e)})).slice(0,3),rt(e))})))}),[F]);var ot="daily"===(null===F||void 0===F?void 0:F.type),lt=ot&&((0,xe.isYesterdaysDailyTarget)(F)||(null===N||void 0===N?void 0:N.isPro))&&!(0,xe.isTodaysDailyTarget)(F),ct=ot&&!(0,xe.isTodaysDailyTarget)(F)&&!(0,xe.isYesterdaysDailyTarget)(F);(0,m.useEffect)((function(){ct&&!(null===N||void 0===N?void 0:N.isPro)&&de(!0)}),[ot,null===N||void 0===N?void 0:N.isPro]),(0,m.useEffect)((function(){F&&(T.query.openTopSolutions&&Zn())}),[H,F]);var dt=(0,Oe.r)(),ut=dt.editorSettings,ht=dt.editorSettingsChangeHandler;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h(),{children:[(0,o.jsx)("meta",{property:"og:url",content:"https://cssbattle.dev/play/".concat(H)},"url"),(0,o.jsx)("meta",{property:"og:image",content:"https://cssbattle.dev/api/socialImage/target?id=".concat(H)},"banner"),F?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("meta",{property:"og:title",content:"Target ".concat(st," ").concat(F.name?"(".concat(F.name,")"):""," - CSSBattle")},"ogTitle"),(0,o.jsx)("title",{children:"Target ".concat(st," ").concat(F.name?"(".concat(F.name,")"):""," - CSSBattle")},"title")]}):null]}),(0,o.jsxs)("div",{className:"container container--fixed-height",children:[(0,o.jsxs)("div",{className:"container__item container__item--main container__item--editor",children:[Kn&&(0,o.jsx)(Kn,{code:Ee,onChange:function(e){y(e)},type:"Editor",keyCombo:"ctrl+shift+e",consoleInfo:fn,meta:(0,o.jsx)(ze.G,{codeLength:Ee.length,onEditorSettingsChange:ht}),gameMode:null===Ie||void 0===Ie?void 0:Ie.gameMode,showGameMode:F&&"daily"!==F.type,fontSize:ut.fontSize,vimMode:ut.vim})," ",M&&(0,o.jsx)("div",{className:"btn-group--with-background",children:(0,o.jsxs)(O.hE,{children:[N&&!N.gameMode&&(0,o.jsx)(z.z,{onClick:function(){return w("openEditorPluginsBtnClick")},children:(0,o.jsxs)(R.HStack,{gap:"0.3rem",align:"center",children:["Plugins ",(null===N||void 0===N?void 0:N.isPro)&&(0,o.jsx)(Te.M,{value:"ctrl+shift+p"}),!(null===N||void 0===N?void 0:N.isPro)&&(0,o.jsx)(te.Z,{})]})}),N&&!N.gameMode&&(0,o.jsx)(z.z,{onClick:function(){return Fn.apply(this,arguments)},children:"My Solutions"}),F&&(F.isOpen||ot)&&(0,o.jsxs)(z.z,{onClick:Zn,children:[ot&&!lt?null:(0,o.jsx)("img",{height:"18",src:"/images/open-book.svg",alt:"",style:{marginRight:"0.5rem"}}),lt||F.isOpen?null:(0,o.jsx)(Y.J,{name:"lock"}),"Top Solutions"]}),(0,o.jsx)(z.z,{primary:!0,onClick:Un,disabled:!(!un&&!fn.isCodeInvalid)&&"disabled ","data-hint":"Don't be afraid. You can submit multiple times",extraClasses:"hint--top-left",isLoading:un,children:(0,o.jsxs)(R.HStack,{gap:"0.3rem",align:"center",children:[ie?null:(0,o.jsx)(Y.J,{name:"lock",marginRight:"0"}),"Submit",ie?(0,o.jsx)(Te.M,{value:"".concat(Yn,"+Enter")}):""]})})]})})]}),(0,o.jsxs)("div",{className:"container__item container__item--scrollable container__item--output",children:[(0,o.jsx)(v.M,{meta:(0,o.jsx)(Me,{isSliderOn:xn,slideToggleHandler:jn,isDiffOn:Sn,diffToggleHandler:Cn}),children:"Code output"}),(0,o.jsxs)("div",{className:"item__content",children:[(null===N||void 0===N?void 0:N.gameMode)&&!$n||!M?null:(0,o.jsx)(g.M,{isSliderOn:xn,isDiffOn:Sn,code:Ee,levelImage:F?F.image:"",use2xForDiff:q}),(0,o.jsx)(ke,{result:an,myLevelHighScore:ln,level:F,levelStats:it,battle:Ie,onLevelLeaderboardClick:Bn}),(null===N||void 0===N?void 0:N.gameMode)&&Qn&&(0,o.jsx)(he,{minutes:3,onFinish:tt})]})]}),(0,o.jsxs)("div",{className:"container__item container__item--scrollable container__item--target",children:[(0,o.jsx)(v.M,{meta:"400px x 300px",children:"Recreate this target"}),F?(0,o.jsxs)("div",{className:"item__content",children:[(0,o.jsx)(pe.V,{levelData:F}),M?(null===N||void 0===N?void 0:N.isPro)?(0,o.jsxs)(R.VStack,{align:"stretch",gap:"1rem",children:[(0,o.jsx)("div",{className:"inner-header",children:(0,o.jsxs)(R.HStack,{gap:"0.5rem",children:[(0,o.jsx)("h4",{className:"header__title header__title--inner",children:"Toolbox"}),(0,o.jsx)(Te.M,{value:"ctrl+shift+t"})]})}),(0,o.jsx)(Le,{levelId:H,onScriptSelect:Vn,scripts:Mn})]}):mn?(0,o.jsx)(ne,{levelId:H}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"inner-header",children:(0,o.jsx)("h4",{className:"header__title header__title--inner",children:"Target Sponsor"})}),(0,o.jsx)(J,{type:"ethicalads"})]}):null]}):null]})]}),(0,o.jsx)(V.Y,{isOpen:Qe,onRequestClose:function(){return $e(!1)},children:Qe&&(0,o.jsx)(P,{levelId:H})}),(0,o.jsx)(V.Y,{isOpen:nn,onRequestClose:function(){return tn(!1)},side:"right",children:nn&&(0,o.jsx)(m.Suspense,{fallback:(0,o.jsx)(O.e9,{}),children:(0,o.jsx)(Re,{onScriptSelect:Vn,onUpdate:An})})}),(0,o.jsx)(V.Y,{isOpen:Ze,onRequestClose:function(){return Ge(!1)},children:(0,o.jsx)(E.V,{levelId:H,submissions:He,onSubmissionSelect:C,isFetching:Je,onUpdate:function(e){return Be(e)},highScore:ln})}),(0,o.jsx)(V.Y,{isOpen:Ue,onRequestClose:function(){return We(!1)},children:Ue&&(0,o.jsx)(Z,{levelId:H,onSubmissionSelect:C,levelType:null===F||void 0===F?void 0:F.type})}),(0,o.jsx)(Q,{isOpen:_n,score:an.score,onRequestClose:function(){return Tn(!1)}}),(0,o.jsx)(se,{isOpen:Pn,onViewSolutionsRequest:function(){x(),Zn()},onRequestClose:function(){return x()}}),(0,o.jsx)(ye,{isOpen:zn,onRequestClose:function(){return On(!1),void window.localStorage.setItem("hasSeenDailyTargetModal",!0)}}),(0,o.jsx)(ge,{isOpen:le,onRequestClose:function(){return de(!1)}}),(0,o.jsx)(je,{isOpen:be,isTodaysTarget:(0,xe.isTodaysDailyTarget)(F||{}),onRequestClose:function(){return Se(!1)}}),et&&(0,o.jsx)(ce,{onRequestClose:nt})]})}}},function(e){e.O(0,[8917,6767,7564,2152,2476,4807,1441,380,723,9774,2888,179],(function(){return n=1311,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=[levelId]-31954ea3bc7c87af.js.map