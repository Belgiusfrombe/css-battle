(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4807],{4807:function(e,t,a){"use strict";a.d(t,{E:function(){return T},i:function(){return _}});var r=a(865),i=a(6670),n=a(930),s=a(2322),l=a(9097),c=a.n(l),o=a(2784),d=a(7037),g=a(3552),h=a(1251),u=a(1551),m=a(4030),p=a(7500),f=a(5598),x=a(7841),j=a(9604),y=a(9376),v=a(2367);function D(e){var t,a=e.data,r=e.playerData,i=void 0===r?{}:r,n=e.stats,l=e.unlockDate,d=e.gameMode,m=(0,o.useContext)(g.S),p=(0,o.useState)(!a.id),j=p[0],v=p[1];(0,o.useEffect)((function(){v(!a.id)}),[a.id]),a.image=j?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var D=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");return(0,s.jsxs)("div",{className:"target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""," ").concat(n&&n.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)&&"target-tile--glowing"),children:[(0,s.jsxs)("div",{className:"target-top-info",children:[a.id?(0,s.jsx)("p",{className:"target-top-info__pill",children:a.id.length>5&&a.name||"#".concat(a.id)}):null,a.isOpen?(0,s.jsx)("p",{className:"target-top-info__pill",children:(0,s.jsx)("img",{alt:"",src:"/images/open-book.svg"})}):null]}),(0,s.jsxs)(f.VStack,{gap:"1rem",align:"stretch",fullHeight:!0,children:[a.id&&(0,s.jsx)(c(),{href:"/play/".concat(a.id),children:(0,s.jsx)("a",{className:"shadow-link",title:"Play target number ".concat(a.id)})}),a.id?(0,s.jsx)("img",{src:a.image,srcSet:"".concat(D," 2x"),alt:"",loading:"lazy",className:"target-tile__image"}):(0,s.jsx)(y.d,{opacity:"0.01",children:(0,s.jsx)("img",{src:"/images/lock.svg",width:"33",height:"43",style:{opacity:.75}})}),(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsxs)(f.VStack,{gap:"0",align:"stretch",justify:"space-around",fullHeight:!0,children:[n&&"firstToMatch"!==d?(0,s.jsx)("div",{children:(0,s.jsxs)(f.VStack,{gap:"1rem",children:[(0,s.jsx)(h.qE,{small:!0,size:"40",url:n.highscore.playerProfile.avatar,userId:n.highscore.playerProfile.userId,isPro:n.highscore.playerProfile.isPro,username:n.highscore.playerProfile.username,className:"target-highscore__avatar"}),(0,s.jsxs)(f.VStack,{gap:"0.4rem",children:[(0,s.jsx)(h.Rj,{name:n.highscore.playerProfile.displayName,username:n.highscore.playerProfile.username,userId:n.highscore.playerProfile.userId,ellipsis:!0,rank:1}),(0,s.jsxs)("p",{className:"target-highscore__score",children:[n.highscore.score," ","firstToMatch"!==d?(0,s.jsxs)("span",{children:["{",n.highscore.codeSize,"}"]}):null]})]})]})}):null,!n&&!j&&(0,s.jsx)("div",{children:(0,s.jsxs)(f.VStack,{gap:"0.25rem",children:[(0,s.jsx)(x.x,{mono:!1,size:4,weight:500,appearance:"tertiary",children:"\ud83d\ude2d"}),(0,s.jsx)(x.x,{mono:!1,size:1,weight:500,appearance:"secondary",children:"No highscore yet"}),(0,s.jsx)(x.x,{mono:!1,size:0,weight:500,appearance:"tertiary",children:"Be the first?"})]})}),j&&l?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"daily-target-text",style:{padding:"1rem 1rem 0.5rem"},children:[(0,s.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,s.jsx)("div",{style:{marginTop:"1rem"},children:(0,s.jsx)(u.W,{showEmoji:!1,suffix:"",date:l,size:"0.1",showUnits:!0,maxLength:2,justify:"center"})})]})}):null,m&&!j&&(0,s.jsx)("div",{style:{marginTop:"1rem"},children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"target-attempts",children:(0,s.jsx)("p",{className:"target-attempts__item  target-attempts__item--score ".concat(!i.score&&"target-attempts__item--not-played"),children:n&&n.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)?(0,s.jsx)("span",{children:"That's you!"}):i.score?(0,s.jsxs)("span",{children:["You - ",i.score," ","firstToMatch"!==d?(0,s.jsxs)("span",{children:["{",i.codeSize||"-","}"]}):null]}):(0,s.jsx)("span",{children:"You - Not played"})})})})})]})}),a.isOpen?(0,s.jsx)("div",{className:"public-target-message",children:(0,s.jsxs)("p",{children:['This is an "Open" Target. Open Targets have all the top solutions public.'," ",(0,s.jsx)("a",{className:"link",href:"/blog/introducing-open-targets/",children:"Learn More"})]})}):null]})]})}function _(e){var t,a=e.target,r=e.showTags,i=e.data,n=e.lazy,l=void 0===n||n,d=e.useCdnUrl,g=e.children;a.image=p?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var h=d?(0,v.X2)(a.image):a.image,u=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");u=d?(0,v.X2)(u):u;var m=(0,o.useState)(!a.id),p=m[0],f=m[1];return(0,o.useEffect)((function(){f(!a.id)}),[a.id]),(0,s.jsxs)("div",{className:"target-tile--daily  target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""),children:[a.id&&"dummy"!==a.id&&(0,s.jsx)(c(),{href:"/play/".concat(a.id),children:(0,s.jsx)("a",{className:"shadow-link",title:"Play target for ".concat((0,v.Jp)(a.startDate,{showTime:!1,utc:!0}))})}),"dummy"===a.id?(0,s.jsx)(y.d,{children:(0,s.jsx)("img",{src:"/images/lock.svg",width:"33",height:"43",style:{opacity:.75}})}):(0,s.jsx)("img",{src:h,srcSet:"".concat(u," 2x"),alt:"",loading:l?"lazy":"eager",className:"target-tile__image"}),r&&(0,s.jsx)("div",{className:"target-tile__info",children:(0,s.jsx)("div",{className:"target-top-info",children:a?(0,s.jsxs)("p",{className:"target-top-info__pill",children:[i?(0,s.jsx)(j.J,{name:"tick-round",size:"1em",color:"white"}):null," ",a.formattedDate]}):null})}),g]})}function T(e){var t=(0,o.useState)(),a=t[0],l=t[1],c=(0,o.useState)(),g=c[0],h=c[1],u=e.gameMode;return(0,o.useEffect)((function(){if(l(),h(),e.data.id){var t=e.data.id;return(0,d.GT)(e.data.id).then((function(a){t===e.data.id&&l(a)})),function(){t=null}}}),[e.data.id]),(0,o.useEffect)((function(){var t=u===p.BattleGameModes.FIRST_TO_MATCH?0:e.targetBatches?function(e,t){if(!Array.isArray(t)||0===t.length)throw new Error("Invalid batch sizes");for(var a=t.reduce((function(e,t){return(0,n.Z)(e).concat([e[e.length-1]+t])}),[0]),r=0,i=0;i<a.length;i++)if(e<a[i]){r=i;break}return r-1}(e.index,e.targetBatches):Math.floor(e.index/2);if(e.battleStartDate){var a=(0,m.normalizeDate)(e.battleStartDate);a.setDate(a.getDate()+7*t),h(a)}}),[e.data.id]),(0,s.jsx)(D,(0,i.Z)((0,r.Z)({},e),{stats:a,unlockDate:g,gameMode:u}))}},9376:function(e,t,a){"use strict";a.d(t,{d:function(){return l}});var r=a(2322),i=a(2784),n=i.useEffect,s=i.useRef,l=function(e){var t=e.children,a=e.opacity,i=s();return n((function(){var e=setInterval((function(){var e=.1*Math.random();i.current.querySelector("feTurbulence").setAttribute("baseFrequency","0 "+e)}),150);return function(){clearInterval(e)}}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"tv-glitch",style:{"--opacity":a},children:[(0,r.jsx)("svg",{children:(0,r.jsx)("defs",{children:(0,r.jsxs)("filter",{id:"noise",x:"0%",y:"0%",width:"100%",height:"100%",ref:i,children:[(0,r.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0 0.000001",result:"NOISE",numOctaves:"2"}),(0,r.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"NOISE",scale:"100",xChannelSelector:"R",yChannelSelector:"R"})]})})}),(0,r.jsx)("img",{className:"tv-glitch__image",src:"/images/tv-glitch.png"}),t]})})}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function a(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(a){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,r){if(!e||!t)return!1;const i=new Date(a(e.toDate?e.toDate():e,r)),n=new Date(a(t.toDate?t.toDate():t,r));return i.getDate()===n.getDate()&&i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return a.setDate(a.getDate()-1),t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:a,getRandomId:function(e=20){const t="abcdefghijklmnopqrstuvqxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let r=e;r--;)a+=t[~~(Math.random()*t.length)];return a},hasUnicodeChar:function(e){for(var t=0,a=e.length;t<a;t++)if(e.charCodeAt(t)>255)return!0;return!1}}}}]);
//# sourceMappingURL=4807-282b838a0330ce2b.js.map